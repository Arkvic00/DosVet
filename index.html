<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dosis Perronas</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React Libraries -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    
    <!-- Babel to transpile JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- jsPDF for PDF Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617; /* bg-slate-950 */
        }
        .prose p { margin-bottom: 0.75em; }
        .prose strong { font-weight: bold; color: #93c5fd; } /* text-blue-300 */
        .prose ul, .prose ol { margin-left: 1.5em; margin-bottom: 1em; }
        .prose li { margin-bottom: 0.25em; }
        .prose h3 { font-size: 1.1em; font-weight: bold; margin-top: 1em; margin-bottom: 0.5em; color: #60a5fa; } /* text-blue-400 */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #1e293b;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 101;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.75rem;
            line-height: 1.25;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .ai-response-container {
            white-space: pre-wrap; /* Allows text to wrap and respects line breaks */
            font-family: monospace;
            background-color: #1a202c;
            padding: 1rem;
            border-radius: 0.5rem;
            color: #e2e8f0;
            margin-top: 1rem;
            border: 1px solid #4a5568;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
</head>
<body class="bg-slate-950">
    <div id="root"></div>

    <script type="text/babel">
        // --- SVG Icons ---
        const ClipboardList = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="8" height="4" x="8" y="2" rx="1" ry="1" /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" /><path d="M12 11h4" /><path d="M12 16h4" /><path d="M8 11h.01" /><path d="M8 16h.01" /></svg> );
        const X = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><line x1="18" x2="6" y1="6" y2="18" /><line x1="6" x2="18" y1="6" y2="18" /></svg> );
        const PlusCircle = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10" /><line x1="12" x2="12" y1="8" y2="16" /><line x1="8" x2="16" y1="12" y2="12" /></svg> );
        const RotateCw = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M21 2v6h-6" /><path d="M3 12a9 9 0 0 1 15-6.7L21 8" /><path d="M3 22v-6h6" /><path d="M21 12a9 9 0 0 1-15 6.7L3 16" /></svg> );
        const Siren = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 12c-1.933 0-3.5-1.567-3.5-3.5S10.067 5 12 5s3.5 1.567 3.5 3.5"/><path d="M12 12v6"/><path d="M12 12H6m6 0h6"/><path d="M18 12c0 3.314-2.686 6-6 6s-6-2.686-6-6"/><path d="M6 12c0-3.314 2.686-6 6-6s6 2.686 6 6"/><path d="M12 5V2"/><path d="M5 12H2m20 0h-3"/></svg> );
        const Calculator = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="16" height="20" x="4" y="2" rx="2" /><line x1="8" x2="16" y1="6" y2="6" /><line x1="16" x2="16" y1="14" y2="18" /><line x1="16" x2="12" y1="14" y2="14" /><line x1="12" x2="12" y1="14" y2="18" /><line x1="8" x2="8" y1="14" y2="18" /></svg> );
        const AlertTriangle = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></svg> );
        const Square = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="18" height="18" x="3" y="3" rx="2"/></svg> );
        const ChevronDown = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m6 9 6 6 6-6"/></svg> );
        const Droplet = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C5 11.1 4 13 4 15a7 7 0 0 0 7 7z"/></svg> );
        const Beaker = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M4.5 3h15"/><path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-16V3"/><path d="M6 14h12"/></svg> );
        const Menu = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg> );
        const MoreVertical = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg> );
        const HelpCircle = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg> );
        const FileDown = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><polyline points="7 10 12 15 17 10" /><line x1="12" y1="15" x2="12" y2="3" /></svg> );
        const Star = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" /></svg> );
        const BookOpen = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg> );
        const HeartPulse = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M19.5 12.5c0-1.5-1.1-2.8-2.5-3-1.4-.2-2.8.4-3.5 1.5-1.1 1.6-3.2 1.6-4.2 0-1.1-1.6-3.2-1.6-4.2 0C3.7 12.4 3 14.2 3 16c0 2.8 2.2 5 5 5 1.2 0 2.3-.4 3.1-1.2.8.8 1.9 1.2 3.1 1.2 2.8 0 5-2.2 5-5 0-1.1-.4-2.2-1-3-.6-.8-1.5-1.2-2.5-1.2z"/><path d="M12.5 10.5 15 13l2-1.5-2-1.5-2.5 2.5z"/></svg> );
        const FlaskConical = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M10 2v7.31"/><path d="M14 9.31V2"/><path d="M8.5 2h7"/><path d="M14 9.31 16.5 4"/><path d="M10 9.31 7.5 4"/><path d="M12 14v8"/><path d="M8.7 14H5.1c-1.7 0-3.1 1.4-3.1 3.1 0 1.3.8 2.5 2 2.9l1.2.4c.9.3 1.8.3 2.7 0l1.2-.4c1.2-.4 2-1.6 2-2.9.1-1.7-1.3-3.1-3-3.1h-3.7z"/></svg> );
        const Save = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" /><polyline points="17 21 17 13 7 13 7 21" /><polyline points="7 3 7 8 15 8" /></svg> );
        const Slash = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/></svg> );
        const Lightbulb = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.8 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg> );
        const Zap = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg> );
        const Shuffle = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/><polyline points="16 16 21 16 21 21"/><line x1="15" y1="15" x2="21" y2="21"/><line x1="4" y1="4" x2="9" y2="9"/></svg> );
        const Users = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg> );
        const Clock = (props) => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> );

        // --- UNIFIED DATABASE ---
        const initialMedications = [
           { "name": "Aceite Mineral", "commercial_names": ["Kondremul®"], "concentration": { "Líquido": "100%" }, "doses": { "Perros": [{ "purpose": "Laxante lubricante", "dose_range_min": 5, "dose_range_rec": 15, "dose_range_max": 30, "unit": "mL/perro", "route": "PO", "frequency": "Según se necesite" }], "Gatos": [{ "purpose": "Laxante lubricante, bolas de pelo", "dose_range_min": 2, "dose_range_rec": 5, "dose_range_max": 10, "unit": "mL/gato", "route": "PO", "frequency": "Según se necesite" }], "Equinos": [{ "purpose": "Laxante para impactación", "dose_range_min": 1000, "dose_range_rec": 2000, "dose_range_max": 4000, "unit": "mL/caballo", "route": "PO (sonda nasogástrica)" }], "Bovinos": [{ "purpose": "Laxante, timpanismo espumoso", "dose_range_min": 1000, "dose_range_rec": 2000, "dose_range_max": 4000, "unit": "mL/vaca", "route": "PO (sonda orogástrica)" }], "Conejos": [{ "purpose": "Laxante", "dose_range_min": 5, "dose_range_rec": 10, "dose_range_max": 15, "unit": "mL/conejo", "route": "PO", "frequency": "c/12-24h" }], "Hurones": [{ "purpose": "Laxante", "dose_range_min": 5, "dose_range_rec": 10, "dose_range_max": 20, "unit": "mL/hurón", "route": "PO", "frequency": "c/12-24h" }], "Reptiles": [{ "purpose": "Laxante para constipación", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 2, "unit": "mL/kg", "route": "PO", "frequency": "c/24-48h" }] }, "functions": "Laxante emoliente/lubricante. Actúa recubriendo las heces para facilitar su paso.", "recommendations": "Administrar con cuidado para evitar la aspiración. No es ideal para uso crónico.", "precautions": "El principal riesgo es la neumonía por aspiración si se administra incorrectamente. El uso crónico puede interferir con la absorción de vitaminas liposolubles (A, D, E, K).", "contraindications": "Pacientes con riesgo de aspiración, vómitos o disfagia.", "interactions": { "summary": "Puede disminuir la absorción de fármacos liposolubles.", "specifics": [] }, "substitutes": ["Docusato Sódico", "Lactulosa", "Psyllium"] },
  { "name": "Acetato de Metilprednisolona", "commercial_names": ["Depo-Medrol®"], "concentration": { "Suspensión Inyectable de Depósito": "20 mg/mL" }, "doses": { "Perros": [{ "purpose": "Antiinflamatorio de depósito (alergias, artritis)", "dose_range_min": 1, "dose_range_rec": 1.5, "dose_range_max": 2, "unit": "mg/kg", "route": "IM, SC, Intraarticular", "frequency": "Repetir cada 2-3 semanas" }], "Gatos": [{ "purpose": "Antiinflamatorio de depósito (asma, complejo granuloma eosinofílico)", "dose_range_min": 10, "dose_range_rec": 15, "dose_range_max": 20, "unit": "mg/gato", "route": "IM, SC", "frequency": "Repetir cada 2-4 semanas" }], "Equinos": [{ "purpose": "Antiinflamatorio intraarticular", "dose_range_min": 40, "dose_range_rec": 100, "dose_range_max": 200, "unit": "mg/articulación", "route": "Intraarticular" }], "Hurones": [{ "purpose": "Antiinflamatorio", "dose_range_min": 1, "dose_range_rec": 1.5, "dose_range_max": 2, "unit": "mg/kg", "route": "IM, SC", "frequency": "Cada 2-4 semanas" }], "Conejos": [{ "purpose": "Antiinflamatorio", "dose_range_min": 1, "dose_range_rec": 1.5, "dose_range_max": 2, "unit": "mg/kg", "route": "IM, SC", "frequency": "Cada 2-4 semanas" }] }, "functions": "Corticosteroide sintético de acción prolongada. Tiene potentes efectos antiinflamatorios e inmunosupresores.", "recommendations": "Reservar para casos donde la medicación oral diaria no es factible. Agitar bien la suspensión antes de usar.", "precautions": "Similar a otros corticosteroides (PU/PD/PP). El uso crónico puede inducir diabetes mellitus (especialmente en gatos) o hiperadrenocorticismo iatrogénico. Puede causar atrofia dérmica en el sitio de inyección.", "contraindications": "Infecciones fúngicas sistémicas, úlceras corneales. No administrar por vía IV.", "interactions": { "summary": "Aumenta el riesgo de úlceras GI con AINEs. Disminuye la eficacia de las vacunas.", "specifics": [] }, "substitutes": ["Acetonido de Triamcinolona", "Betametasona", "Prednisolona (oral)"] },
  { "name": "Acetato de Prednisolona", "commercial_names": ["Pred Forte® (oftálmico)"], "concentration": { "Suspensión Oftálmica": "1%" }, "doses": { "Perros": [{ "purpose": "Antiinflamatorio esteroideo oftálmico", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/4-12h" }], "Gatos": [{ "purpose": "Uveítis anterior", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/4-12h" }], "Equinos": [{ "purpose": "Uveítis recurrente equina", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/2-6h" }] }, "functions": "Corticosteroide tópico. Es el antiinflamatorio de elección para la uveítis anterior no infecciosa. Reduce la inflamación, el edema y la neovascularización.", "recommendations": "Agitar bien la suspensión antes de usar. Es más potente que la dexametasona para el control de la inflamación intraocular.", "precautions": "Puede potenciar infecciones (fúngicas, virales), retrasar la cicatrización y causar fusión de la córnea (queratomalacia) si existe una úlcera.", "contraindications": "ABSOLUTAMENTE CONTRAINDICADO SI HAY ÚLCERA CORNEAL (teñir siempre con fluoresceína antes de usar).", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Dexametasona (oftálmica)", "AINEs oftálmicos"] },
  { "name": "Ácido Tióctico", "commercial_names": ["Ácido Alfa Lipoico"], "concentration": { "Cápsulas": "100 mg" }, "doses": { "Perros": [{ "purpose": "Hepatoprotector, antioxidante (intoxicación por Amanita, enfermedad hepática)", "dose_range_min": 10, "dose_range_rec": 25, "dose_range_max": 50, "unit": "mg/kg", "route": "PO, IV", "frequency": "c/8-12h" }], "Gatos": [{ "purpose": "Hepatoprotector, antioxidante", "dose_range_min": 10, "dose_range_rec": 15, "dose_range_max": 25, "unit": "mg/kg", "route": "PO", "frequency": "c/12-24h" }] }, "functions": "Antioxidante endógeno. Participa en el metabolismo energético y ayuda a regenerar otros antioxidantes como la vitamina C, vitamina E y el glutatión.", "recommendations": "Se utiliza como terapia adyuvante en hepatopatías y ciertas neuropatías (ej. diabética).", "precautions": "Muy seguro. Dosis altas pueden causar hipoglucemia.", "contraindications": "Ninguna significativa.", "interactions": { "summary": "Puede potenciar el efecto de los agentes hipoglucemiantes.", "specifics": [] }, "substitutes": ["S-Adenosilmetionina (SAMe)", "Silimarina", "Vitamina E"] },
  { "name": "Ácido Tolfenámico", "commercial_names": ["Tolfedine®"], "concentration": { "Tabletas": "20 mg", "Solución Inyectable": "40 mg/mL" }, "doses": { "Perros": [{ "purpose": "Analgésico y antiinflamatorio (dolor agudo y crónico)", "dose_range_min": 4, "dose_range_rec": 4, "dose_range_max": 4, "unit": "mg/kg", "route": "PO, SC", "frequency": "c/24h" }], "Gatos": [{ "purpose": "Analgésico y antipirético", "dose_range_min": 4, "dose_range_rec": 4, "dose_range_max": 4, "unit": "mg/kg", "route": "PO, SC", "frequency": "c/24h" }] }, "functions": "Antiinflamatorio no esteroideo (AINE) con propiedades analgésicas y antipiréticas. Inhibe la ciclooxigenasa (COX).", "recommendations": "No disponible en todos los países. Administrar con comida.", "precautions": "Similar a otros AINEs, puede causar toxicidad gastrointestinal y renal.", "contraindications": "Enfermedad GI, renal o hepática preexistente. No usar con otros AINEs o corticosteroides.", "interactions": { "summary": "Aumenta el riesgo de toxicidad con otros AINEs o corticosteroides.", "specifics": [] }, "substitutes": ["Meloxicam", "Carprofeno", "Robenacoxib"] },
  { "name": "Ácido Tranexámico", "commercial_names": ["Cyklokapron®"], "concentration": { "Solución Inyectable": "100 mg/mL", "Tabletas": "500 mg" }, "doses": { "Perros": [{ "purpose": "Agente antifibrinolítico (hemorragias, ej. por trauma, angioestrongilosis)", "dose_range_min": 10, "dose_range_rec": 15, "dose_range_max": 25, "unit": "mg/kg", "route": "IV lenta, PO", "frequency": "c/8h" }], "Gatos": [{ "purpose": "Antifibrinolítico", "dose_range_min": 10, "dose_range_rec": 15, "dose_range_max": 25, "unit": "mg/kg", "route": "IV lenta, PO", "frequency": "c/8h" }] }, "functions": "Agente antifibrinolítico. Previene la degradación de los coágulos de fibrina al inhibir competitivamente la activación del plasminógeno a plasmina. Es más potente que el ácido aminocaproico.", "recommendations": "Útil en situaciones de sangrado donde se sospecha hiperfibrinólisis. Administrar por IV lentamente.", "precautions": "La administración IV rápida puede causar hipotensión. Puede aumentar el riesgo de trombosis si se usa en pacientes con coagulación intravascular diseminada (CID) activa.", "contraindications": "CID activa sin el uso concomitante de heparina.", "interactions": { "summary": "No se han reportado interacciones significativas.", "specifics": [] }, "substitutes": ["Ácido Aminocaproico"] },
  { "name": "Adrenalina", "commercial_names": ["Epinefrina"], "concentration": { "Solución Inyectable": "1 mg/mL (1:1000)" }, "doses": { "Perros": [{ "purpose": "Paro cardiaco", "dose_range_min": 0.01, "dose_range_rec": 0.02, "dose_range_max": 0.02, "unit": "mg/kg", "route": "IV, Intratraqueal", "frequency": "Cada 3-5 min" }, { "purpose": "Anafilaxia", "dose_range_min": 0.01, "dose_range_rec": 0.015, "dose_range_max": 0.02, "unit": "mg/kg", "route": "IM, SC", "frequency": "Según se necesite" }], "Gatos": [{ "purpose": "Paro cardiaco", "dose_range_min": 0.01, "dose_range_rec": 0.02, "dose_range_max": 0.02, "unit": "mg/kg", "route": "IV, Intratraqueal", "frequency": "Cada 3-5 min" }], "Aves": [{ "purpose": "Paro cardiaco/Anafilaxia", "dose_range_min": 0.01, "dose_range_rec": 0.05, "dose_range_max": 0.1, "unit": "mg/kg", "route": "IV, IO, IM" }], "Reptiles": [{ "purpose": "Paro cardiaco", "dose_range_min": 0.01, "dose_range_rec": 0.02, "dose_range_max": 0.02, "unit": "mg/kg", "route": "IV, IO, ICe" }] }, "functions": "Catecolamina con potentes efectos alfa y beta adrenérgicos. Es el fármaco de elección para el paro cardiaco y la anafilaxia.", "recommendations": "En paro cardiaco, se puede usar la ruta intratraqueal (al doble de la dosis IV) si no hay acceso vascular. Para anafilaxia, la ruta IM es preferible.", "precautions": "Puede causar arritmias cardiacas, hipertensión severa y ansiedad. La extravasación puede causar necrosis tisular.", "contraindications": "Shock no anafiláctico, insuficiencia coronaria.", "interactions": { "summary": "Los efectos se potencian con otros simpaticomiméticos.", "specifics": [] }, "substitutes": ["Norepinefrina", "Vasopresina"] },
  { "name": "Alfaxalona", "commercial_names": ["Alfaxan®"], "concentration": { "Solución Inyectable": "10 mg/mL" }, "doses": { "Perros": [{ "purpose": "Inducción anestésica", "dose_range_min": 1, "dose_range_rec": 2, "dose_range_max": 3, "unit": "mg/kg", "route": "IV a efecto" }, { "purpose": "Mantenimiento (infusión)", "dose_range_min": 4, "dose_range_rec": 6, "dose_range_max": 8, "unit": "mg/kg/h", "route": "IV" }], "Gatos": [{ "purpose": "Inducción anestésica", "dose_range_min": 2, "dose_range_rec": 5, "dose_range_max": 5, "unit": "mg/kg", "route": "IV a efecto" }], "Conejos": [{ "purpose": "Inducción/Anestesia", "dose_range_min": 2, "dose_range_rec": 5, "dose_range_max": 10, "unit": "mg/kg", "route": "IV, IM" }], "Aves": [{ "purpose": "Inducción/Anestesia", "dose_range_min": 5, "dose_range_rec": 10, "dose_range_max": 15, "unit": "mg/kg", "route": "IV, IM" }] }, "functions": "Anestésico neuroesteroide inyectable. Modula los receptores GABA-A para inducir la anestesia. Tiene mínimos efectos cardiovasculares.", "recommendations": "Proporciona una inducción y recuperación suaves. Titular lentamente por vía IV a efecto. No contiene conservantes, desechar el vial abierto.", "precautions": "Puede causar depresión respiratoria (apnea), especialmente con la inyección rápida. No proporciona analgesia.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "Potencia los efectos de otros depresores del SNC.", "specifics": [] }, "substitutes": ["Propofol", "Etomidato", "Ketamina/Benzodiazepina"] },
  { "name": "Amfotericina B", "commercial_names": ["Fungizone®", "Abelcet®", "AmBisome®"], "concentration": { "Polvo para reconstituir": "50 mg" }, "doses": { "Perros": [{ "purpose": "Infecciones fúngicas sistémicas", "dose_range_min": 0.25, "dose_range_rec": 0.5, "dose_range_max": 1, "unit": "mg/kg (Desoxicolato); 1-3 mg/kg (Liposomal)", "route": "IV lenta", "frequency": "3 veces por semana" }], "Gatos": [{ "purpose": "Infecciones fúngicas sistémicas", "dose_range_min": 0.25, "dose_range_rec": 0.3, "dose_range_max": 0.5, "unit": "mg/kg (Desoxicolato); 1-2 mg/kg (Liposomal)", "route": "IV lenta", "frequency": "3 veces por semana" }], "Aves": [{ "purpose": "Aspergilosis sistémica", "dose_range_min": 1, "dose_range_rec": 1.5, "dose_range_max": 1.5, "unit": "mg/kg", "route": "IV, Intratraqueal", "frequency": "c/8h por 7 días" }], "Reptiles": [{ "purpose": "Micosis sistémica", "dose_range_min": 0.25, "dose_range_rec": 0.5, "dose_range_max": 1, "unit": "mg/kg", "route": "IV, SC, Intracelómico", "frequency": "c/48-72h" }] }, "functions": "Antifúngico poliénico para micosis sistémicas graves. La forma liposomal es menos nefrotóxica.", "recommendations": "Requiere hospitalización y monitoreo intensivo de la función renal. Administrar fluidoterapia para reducir toxicidad.", "precautions": "ALTAMENTE NEFROTÓXICO (forma desoxicolato). Puede causar reacciones a la infusión (fiebre, vómitos).", "contraindications": "Insuficiencia renal preexistente (contraindicación relativa).", "interactions": { "summary": "Aumenta la nefrotoxicidad de otros fármacos.", "specifics": [{ "drug": "Aminoglucósidos, Ciclosporina", "effect": "Aumenta severamente el riesgo de daño renal" }] }, "substitutes": ["Itraconazol", "Fluconazol", "Voriconazol"] },
  { "name": "Amrinona", "commercial_names": ["Inocor®"], "concentration": { "Solución Inyectable": "5 mg/mL" }, "doses": { "Perros": [{ "purpose": "Soporte inotrópico en insuficiencia cardiaca aguda", "dose_range_min": 10, "dose_range_rec": 20, "dose_range_max": 50, "unit": "mcg/kg/min", "route": "Infusión IV continua" }] }, "functions": "Inodilatador (inhibidor de la fosfodiesterasa III), similar a la milrinona.", "recommendations": "Su uso ha sido mayormente reemplazado por la milrinona. Requiere monitoreo hospitalario intensivo.", "precautions": "Puede causar arritmias y trombocitopenia.", "contraindications": "Hipotensión severa.", "interactions": { "summary": "Efectos aditivos con otros vasodilatadores.", "specifics": [] }, "substitutes": ["Milrinona", "Dobutamina", "Pimobendan"] },
  { "name": "Antipirina", "commercial_names": ["Auralgan® (combinado con Benzocaína)"], "concentration": { "Solución Ótica": "5.4%" }, "doses": { "Perros": [{ "purpose": "Analgésico tópico para otitis externa", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "aplicación", "route": "Ótica", "frequency": "c/8-12h" }], "Gatos": [{ "purpose": "Analgésico tópico para otitis externa", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "aplicación", "route": "Ótica", "frequency": "c/8-12h" }] }, "functions": "AINE con propiedades analgésicas para uso tópico en el canal auditivo.", "recommendations": "Comúnmente se encuentra en combinación con un anestésico local (benzocaína).", "precautions": "No usar si la membrana timpánica está rota.", "contraindications": "Ruptura de la membrana timpánica.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Corticosteroides óticos"] },
  { "name": "Bemegrida", "commercial_names": ["Mikedimide®"], "concentration": { "Solución Inyectable": "5 mg/mL" }, "doses": { "Aves": [{ "purpose": "Estimulante respiratorio", "dose_range_min": 5, "dose_range_rec": 10, "dose_range_max": 10, "unit": "mg/kg", "route": "IM, IV" }] }, "functions": "Estimulante del SNC y respiratorio. Se ha utilizado como analeptico para contrarrestar la depresión por barbitúricos.", "recommendations": "Su uso es obsoleto y ha sido reemplazado por antagonistas específicos y cuidados de soporte.", "precautions": "Puede inducir convulsiones.", "contraindications": "Hipoxia severa.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Doxapram", "Ventilación con presión positiva"] },
  { "name": "Benzocaína", "commercial_names": ["Auralgan® (combinado), Americaine®"], "concentration": { "Solución Ótica/Tópica": "1-20%" }, "doses": { "Perros": [{ "purpose": "Anestésico local tópico", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "aplicación", "route": "Tópica, Ótica" }], "Peces": [{ "purpose": "Anestésico de inmersión", "dose_range_min": 25, "dose_range_rec": 50, "dose_range_max": 100, "unit": "mg/L", "route": "Baño" }] }, "functions": "Anestésico local de tipo éster para uso tópico.", "recommendations": "Su uso en pequeños animales es limitado debido al riesgo de metahemoglobinemia.", "precautions": "Puede causar metahemoglobinemia, especialmente en gatos.", "contraindications": "No recomendado en gatos.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Lidocaína (tópica)", "Proparacaína (oftálmica)"] },
  { "name": "Betaxolol", "commercial_names": ["Betoptic®"], "concentration": { "Solución Oftálmica": "0.5%" }, "doses": { "Perros": [{ "purpose": "Tratamiento de glaucoma", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/12h" }], "Gatos": [{ "purpose": "Tratamiento de glaucoma", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/12h" }] }, "functions": "Antagonista beta-adrenérgico cardioselectivo (beta-1). Reduce la producción de humor acuoso para disminuir la presión intraocular.", "recommendations": "Alternativa al timolol, con menor riesgo de causar broncoconstricción.", "precautions": "Aunque es cardioselectivo, usar con cautela en pacientes con enfermedad cardiaca.", "contraindications": "Bradicardia sinusal, bloqueo AV de segundo o tercer grado.", "interactions": { "summary": "Efectos aditivos con betabloqueadores sistémicos.", "specifics": [] }, "substitutes": ["Timolol", "Dorzolamida"] },
  { "name": "Bórax", "commercial_names": ["Ácido bórico/Bórax (combinado)"], "concentration": { "Solución Ótica": "2%" }, "doses": { "Perros": [{ "purpose": "Limpiador/secante ótico", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "aplicación", "route": "Ótica" }], "Gatos": [{ "purpose": "Limpiador/secante ótico", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "aplicación", "route": "Ótica" }] }, "functions": "Agente con propiedades antisépticas y secantes, a menudo combinado con ácido bórico en limpiadores óticos.", "recommendations": "No usar si la membrana timpánica está rota.", "precautions": "Puede ser irritante. La toxicidad sistémica es rara con el uso tópico.", "contraindications": "Ruptura de la membrana timpánica.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Soluciones óticas con clorhexidina o ácido acético"] },
  { "name": "Brinzolamida", "commercial_names": ["Azopt®"], "concentration": { "Suspensión Oftálmica": "1%" }, "doses": { "Perros": [{ "purpose": "Tratamiento de glaucoma", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/8-12h" }], "Gatos": [{ "purpose": "Tratamiento de glaucoma", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/8-12h" }] }, "functions": "Inhibidor de la anhidrasa carbónica tópico. Reduce la producción de humor acuoso para disminuir la presión intraocular.", "recommendations": "Alternativa a la dorzolamida, se reporta que causa menos escozor al instilar. Agitar bien la suspensión.", "precautions": "Generalmente muy bien tolerado. Rara vez pueden ocurrir reacciones de hipersensibilidad.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones significativas.", "specifics": [] }, "substitutes": ["Dorzolamida", "Timolol", "Latanoprost"] },
  { "name": "Bromexina", "commercial_names": ["Bisolvon®"], "concentration": { "Tabletas": "8 mg", "Solución Inyectable": "3 mg/mL" }, "doses": { "Perros": [{ "purpose": "Mucolítico, expectorante", "dose_range_min": 1, "dose_range_rec": 1.5, "dose_range_max": 2, "unit": "mg/kg", "route": "PO", "frequency": "c/12h" }], "Gatos": [{ "purpose": "Mucolítico", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }], "Equinos": [{ "purpose": "Mucolítico", "dose_range_min": 0.1, "dose_range_rec": 0.2, "dose_range_max": 0.4, "unit": "mg/kg", "route": "IV, IM, PO", "frequency": "c/12h" }], "Aves": [{ "purpose": "Mucolítico", "dose_range_min": 1, "dose_range_rec": 2, "dose_range_max": 3, "unit": "mg/kg", "route": "PO", "frequency": "c/12h" }], "Reptiles": [{ "purpose": "Mucolítico", "dose_range_min": 0.3, "dose_range_rec": 0.5, "dose_range_max": 0.6, "unit": "mg/kg", "route": "PO, IM", "frequency": "c/24h" }] }, "functions": "Agente mucolítico. Disminuye la viscosidad de las secreciones bronquiales, facilitando su expulsión.", "recommendations": "Se utiliza como terapia adyuvante en enfermedades respiratorias con secreciones densas.", "precautions": "Puede causar malestar gastrointestinal leve. Su eficacia es debatida.", "contraindications": "Ninguna significativa.", "interactions": { "summary": "Puede aumentar la concentración de ciertos antibióticos en el tejido pulmonar.", "specifics": [] }, "substitutes": ["Acetilcisteína", "Guaifenesina"] },
  { "name": "Buserelina", "commercial_names": ["Receptal®"], "concentration": { "Solución Inyectable": "4 mcg/mL", "Implante": "5.5 mg" }, "doses": { "Perros": [{ "purpose": "Inducción de la ovulación, tratamiento de infertilidad", "dose_range_min": 10, "dose_range_rec": 15, "dose_range_max": 20, "unit": "mcg/perro", "route": "SC" }], "Gatos": [{ "purpose": "Inducción de la ovulación", "dose_range_min": 2, "dose_range_rec": 5, "dose_range_max": 8, "unit": "mcg/gato", "route": "IM" }], "Conejos": [{ "purpose": "Inducción de la ovulación", "dose_range_min": 0.8, "dose_range_rec": 0.8, "dose_range_max": 0.8, "unit": "mcg/kg", "route": "IM, SC" }], "Hurones": [{ "purpose": "Tratamiento de la enfermedad adrenal", "dose_range_min": 20, "dose_range_rec": 20, "dose_range_max": 20, "unit": "mcg/hurón", "route": "SC", "frequency": "Mensual" }] }, "functions": "Análogo sintético de la GnRH (hormona liberadora de gonadotropina). Estimula la liberación de LH y FSH.", "recommendations": "Se utiliza en programas de reproducción para inducir la ovulación y para el diagnóstico y tratamiento de trastornos reproductivos.", "precautions": "Generalmente seguro. El uso repetido puede disminuir la respuesta.", "contraindications": "Gestación.", "interactions": { "summary": "No se han reportado interacciones significativas.", "specifics": [] }, "substitutes": ["Deslorelina", "Gonadotropina Coriónica Humana (HCG)"] },
  { "name": "Cefapirina", "commercial_names": ["Cefa-Dri® (intramamaria)"], "concentration": { "Infusión Intramamaria": "300 mg/jeringa" }, "doses": { "Perros": [{ "purpose": "Infecciones bacterianas", "dose_range_min": 15, "dose_range_rec": 20, "dose_range_max": 25, "unit": "mg/kg", "route": "IV, IM, SC", "frequency": "c/6h" }], "Gatos": [{ "purpose": "Infecciones bacterianas", "dose_range_min": 15, "dose_range_rec": 20, "dose_range_max": 25, "unit": "mg/kg", "route": "IV, IM, SC", "frequency": "c/6h" }], "Bovinos": [{ "purpose": "Tratamiento de mastitis (vacas secas)", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "jeringa por cuarto", "route": "Intramamaria" }] }, "functions": "Cefalosporina de primera generación. Eficaz contra bacterias Gram-positivas. Su uso principal es en el tratamiento de la mastitis bovina.", "recommendations": "Respetar los tiempos de retiro en animales de producción.", "precautions": "Pueden ocurrir reacciones de hipersensibilidad en animales alérgicos a las penicilinas.", "contraindications": "Hipersensibilidad a las cefalosporinas o penicilinas.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Cefazolina", "Cefalexina", "Cloxacilina (intramamaria)"] },
  { "name": "Cidofovir", "commercial_names": ["Vistide®"], "concentration": { "Solución Oftálmica (compounding)": "0.5%" }, "doses": { "Gatos": [{ "purpose": "Queratitis por Herpesvirus Felino (FHV-1)", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/12h" }] }, "functions": "Agente antiviral de amplio espectro. Se utiliza tópicamente para tratar infecciones oculares por herpesvirus.", "recommendations": "Requiere ser formulado por una farmacia de compounding. Es una alternativa a la trifluridina que permite una dosificación mucho menos frecuente.", "precautions": "Puede causar irritación ocular. Su uso sistémico es altamente nefrotóxico.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones con el uso tópico.", "specifics": [] }, "substitutes": ["Trifluridina", "Idoxuridina", "Famciclovir (oral)"] },
  { "name": "Clotrimazol", "commercial_names": ["Otibiotic®", "Otomax® (combinado)"], "concentration": { "Solución Ótica/Tópica": "1%" }, "doses": { "Perros": [{ "purpose": "Tratamiento de otitis externa por Malassezia", "dose_range_min": 4, "dose_range_rec": 6, "dose_range_max": 8, "unit": "gotas/oído", "route": "Ótica", "frequency": "c/12h" }], "Gatos": [{ "purpose": "Tratamiento de otitis externa por Malassezia", "dose_range_min": 2, "dose_range_rec": 3, "dose_range_max": 5, "unit": "gotas/oído", "route": "Ótica", "frequency": "c/12h" }] }, "functions": "Antifúngico azol de amplio espectro. Se utiliza tópicamente para tratar infecciones por levaduras (Malassezia) y dermatofitos.", "recommendations": "Es un componente muy común en preparaciones óticas polivalentes (combinado con un antibiótico y un corticoide).", "precautions": "Muy seguro para uso tópico. No usar si se sospecha de ruptura de la membrana timpánica.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Miconazol", "Ketoconazol (tópico)"] },
  { "name": "Cromoglicato Sódico", "commercial_names": ["Opticrom®"], "concentration": { "Solución Oftálmica": "2%" }, "doses": { "Perros": [{ "purpose": "Tratamiento de conjuntivitis alérgica, pannus", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 2, "unit": "gotas/ojo", "route": "Tópica oftálmica", "frequency": "c/6h" }] }, "functions": "Estabilizador de mastocitos. Previene la degranulación de los mastocitos y la liberación de histamina y otros mediadores inflamatorios.", "recommendations": "Se utiliza para el manejo profiláctico de la conjuntivitis alérgica. No es eficaz para los síntomas agudos.", "precautions": "Muy seguro. Puede causar escozor transitorio.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["AINEs oftálmicos", "Corticosteroides oftálmicos"] },
  { "name": "Danofloxacina", "commercial_names": ["Advocin®"], "concentration": { "Solución Inyectable": "25 mg/mL" }, "doses": { "Bovinos": [{ "purpose": "Tratamiento de la enfermedad respiratoria bovina", "dose_range_min": 1.25, "dose_range_rec": 1.25, "dose_range_max": 1.25, "unit": "mg/kg", "route": "SC", "frequency": "c/24h" }] }, "functions": "Antibiótico fluoroquinolona sintético de uso exclusivo en animales de producción.", "recommendations": "Eficaz contra los principales patógenos respiratorios del ganado.", "precautions": "Puede causar artropatía en animales en crecimiento.", "contraindications": "No usar en vacas lecheras en lactación.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Enrofloxacina", "Ceftiofur", "Tulatromicina"] },
  { "name": "Dextrometorfano", "commercial_names": ["Robitussin DM® (combinado)"], "concentration": { "Jarabe": "Variable" }, "doses": { "Perros": [{ "purpose": "Antitusivo para tos seca no productiva", "dose_range_min": 0.5, "dose_range_rec": 1, "dose_range_max": 2, "unit": "mg/kg", "route": "PO", "frequency": "c/6-8h" }] }, "functions": "Antitusivo no opioide. Actúa a nivel central para suprimir el reflejo de la tos.", "recommendations": "Asegurarse de que las formulaciones no contengan otros fármacos tóxicos para perros (paracetamol, ibuprofeno, xilitol). Su eficacia en perros es cuestionable.", "precautions": "Puede causar mareos o malestar GI. Dosis muy altas pueden causar excitación.", "contraindications": "Tos productiva.", "interactions": { "summary": "No usar con inhibidores de la MAO o ISRS.", "specifics": [] }, "substitutes": ["Hidrocodona", "Codeína", "Butorfanol"] },
  { "name": "Diazóxido", "commercial_names": ["Proglycem®"], "concentration": { "Suspensión Oral": "50 mg/mL" }, "doses": { "Perros": [{ "purpose": "Tratamiento médico de insulinoma", "dose_range_min": 5, "dose_range_rec": 15, "dose_range_max": 30, "unit": "mg/kg", "route": "PO", "frequency": "c/12h" }], "Hurones": [{ "purpose": "Insulinoma", "dose_range_min": 5, "dose_range_rec": 15, "dose_range_max": 30, "unit": "mg/kg", "route": "PO", "frequency": "c/12h" }] }, "functions": "Agente hiperglucemiante. Inhibe directamente la liberación de insulina de las células beta del páncreas y estimula la gluconeogénesis.", "recommendations": "Se utiliza para el manejo médico de la hipoglucemia causada por insulinomas. A menudo se combina con prednisona.", "precautions": "Puede causar vómitos, anorexia, retención de líquidos e hiperglucemia. Requiere monitoreo de la glucosa en sangre.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "Los diuréticos tiazídicos pueden potenciar su efecto hiperglucemiante.", "specifics": [] }, "substitutes": ["Octreótido", "Prednisona"] },
  { "name": "Difenoxilato", "commercial_names": ["Lomotil® (combinado con atropina)"], "concentration": { "Tabletas": "2.5 mg Difenoxilato / 0.025 mg Atropina" }, "doses": { "Perros": [{ "purpose": "Antidiarreico", "dose_range_min": 0.05, "dose_range_rec": 0.1, "dose_range_max": 0.2, "unit": "mg/kg (componente difenoxilato)", "route": "PO", "frequency": "c/8-12h" }] }, "functions": "Opioide sintético similar a la loperamida. Disminuye la motilidad intestinal.", "recommendations": "La atropina se añade en dosis sub-terapéuticas para desalentar el abuso en humanos. No usar en diarreas infecciosas.", "precautions": "Puede causar estreñimiento y sedación. Usar con extrema cautela en razas con mutación MDR1.", "contraindications": "Diarrea infecciosa, obstrucción intestinal. No recomendado en gatos. Sensibilidad genética: razas con mutación del gen MDR1.", "interactions": { "summary": "Efectos sedantes aditivos con otros depresores del SNC.", "specifics": [] }, "substitutes": ["Loperamida"] },
  { "name": "Dihidroestreptomicina", "commercial_names": ["Penstrep® (combinado con Penicilina)"], "concentration": { "Suspensión Inyectable": "250 mg/mL" }, "doses": { "Bovinos": [{ "purpose": "Infecciones bacterianas (Leptospirosis)", "dose_range_min": 12.5, "dose_range_rec": 12.5, "dose_range_max": 25, "unit": "mg/kg", "route": "IM", "frequency": "c/12-24h" }], "Porcinos": [{ "purpose": "Leptospirosis", "dose_range_min": 25, "dose_range_rec": 25, "dose_range_max": 25, "unit": "mg/kg", "route": "IM", "frequency": "c/12h" }] }, "functions": "Antibiótico aminoglucósido. Similar a la estreptomicina.", "recommendations": "A menudo se combina con penicilina para un espectro más amplio. Respetar los tiempos de retiro.", "precautions": "Potencialmente nefrotóxico y ototóxico.", "contraindications": "Insuficiencia renal. No usar en gatos (alta sensibilidad).", "interactions": { "summary": "Aumenta el riesgo de toxicidad con otros fármacos nefrotóxicos.", "specifics": [] }, "substitutes": ["Oxitetraciclina", "Ceftiofur"] },
  { "name": "Dinitrato de Isosorbida", "commercial_names": ["Isordil®"], "concentration": { "Tabletas": "10 mg", "Ungüento": "2%" }, "doses": { "Perros": [{ "purpose": "Vasodilatador venoso", "dose_range_min": 0.25, "dose_range_rec": 0.5, "dose_range_max": 2, "unit": "mg/kg", "route": "PO", "frequency": "c/8-12h" }] }, "functions": "Vasodilatador venoso (nitrato orgánico), similar a la nitroglicerina, pero con una duración de acción más larga. Reduce la precarga cardíaca.", "recommendations": "Se utiliza como terapia adyuvante en la insuficiencia cardíaca congestiva. Su uso es poco común.", "precautions": "Puede causar hipotensión. Se desarrolla tolerancia con el uso continuo.", "contraindications": "Hipotensión.", "interactions": { "summary": "No usar con sildenafil por riesgo de hipotensión severa.", "specifics": [] }, "substitutes": ["Nitroglicerina", "Inhibidores de la ECA"] },
  { "name": "Dipirona (Metamizol)", "commercial_names": ["Buscopan® Compositum (combinado)"], "concentration": { "Solución Inyectable": "500 mg/mL" }, "doses": { "Perros": [{ "purpose": "Analgésico, antipirético, antiespasmódico", "dose_range_min": 25, "dose_range_rec": 30, "dose_range_max": 50, "unit": "mg/kg", "route": "IV, IM, SC", "frequency": "c/8-12h" }], "Gatos": [{ "purpose": "Analgésico, antipirético", "dose_range_min": 25, "dose_range_rec": 25, "dose_range_max": 25, "unit": "mg/kg", "route": "IV, IM, SC", "frequency": "c/12-24h" }], "Equinos": [{ "purpose": "Analgésico (cólico), antipirético", "dose_range_min": 22, "dose_range_rec": 25, "dose_range_max": 30, "unit": "mg/kg", "route": "IV lenta", "frequency": "c/8-12h" }] }, "functions": "AINE con potentes efectos analgésicos, antipiréticos y espasmolíticos, pero con débiles efectos antiinflamatorios.", "recommendations": "Prohibido para uso en animales de producción en muchos países. La administración IV debe ser lenta.", "precautions": "Puede causar discrasias sanguíneas (agranulocitosis) con el uso crónico. Puede causar hipotensión con la inyección IV rápida.", "contraindications": "Enfermedad hematológica preexistente.", "interactions": { "summary": "Usar con cautela con otros AINEs.", "specifics": [] }, "substitutes": ["Flunixin meglumina", "Meloxicam"] },
  { "name": "Dipropionato de Beclometasona", "commercial_names": ["Qvar®"], "concentration": { "Inhalador de dosis medida": "40 mcg/dosis" }, "doses": { "Gatos": [{ "purpose": "Asma felina", "dose_range_min": 40, "dose_range_rec": 40, "dose_range_max": 80, "unit": "mcg/gato", "route": "Inhalada (con espaciador)", "frequency": "c/12h" }] }, "functions": "Corticosteroide inhalado. Similar a la fluticasona, actúa tópicamente en las vías respiratorias para controlar la inflamación.", "recommendations": "Alternativa a la fluticasona para el manejo a largo plazo del asma felina. Requiere el uso de una cámara espaciadora (AeroKat).", "precautions": "Muy seguro, con mínimos efectos sistémicos.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Fluticasona"] },
  { "name": "Dipropionato de Imidocarb", "commercial_names": ["Imizol®"], "concentration": { "Solución Inyectable": "120 mg/mL" }, "doses": { "Perros": [{ "purpose": "Tratamiento de Babesiosis", "dose_range_min": 5, "dose_range_rec": 6, "dose_range_max": 6.6, "unit": "mg/kg", "route": "IM, SC", "frequency": "Una o dos dosis con 14 días de diferencia" }], "Equinos": [{ "purpose": "Tratamiento de Babesiosis (Piroplasmosis)", "dose_range_min": 2, "dose_range_rec": 2.2, "dose_range_max": 4, "unit": "mg/kg", "route": "IM", "frequency": "2-4 dosis c/72h" }] }, "functions": "Agente antiprotozoario Carbanilida. Es el fármaco de elección para el tratamiento de la babesiosis en perros y caballos.", "recommendations": "La inyección puede ser dolorosa. Se puede pre-medicar con atropina o glicopirrolato para reducir los efectos secundarios colinérgicos.", "precautions": "Puede causar signos colinérgicos (salivación, vómitos, diarrea, disnea). También puede causar dolor en el sitio de inyección e insuficiencia renal.", "contraindications": "Enfermedad hepática o renal severa.", "interactions": { "summary": "No usar con inhibidores de la colinesterasa.", "specifics": [] }, "substitutes": ["Atovacuona + Azitromicina"] },
  { "name": "Doxofilina", "commercial_names": ["Ansimar®"], "concentration": { "Tabletas": "400 mg" }, "doses": { "Perros": [{ "purpose": "Broncodilatador", "dose_range_min": 10, "dose_range_rec": 15, "dose_range_max": 20, "unit": "mg/kg", "route": "PO", "frequency": "c/12h" }] }, "functions": "Derivado de la metilxantina, similar a la teofilina pero con un mejor perfil de seguridad.", "recommendations": "Alternativa a la teofilina con menor incidencia de efectos secundarios cardiacos y del SNC.", "precautions": "Puede causar malestar gastrointestinal.", "contraindications": "Hipersensibilidad a las xantinas.", "interactions": { "summary": "Menos interacciones que la teofilina.", "specifics": [] }, "substitutes": ["Teofilina", "Terbutalina"] },
  { "name": "Edrofonio", "commercial_names": ["Tensilon®"], "concentration": { "Solución Inyectable": "10 mg/mL" }, "doses": { "Perros": [{ "purpose": "Diagnóstico de miastenia gravis", "dose_range_min": 0.1, "dose_range_rec": 0.15, "dose_range_max": 0.2, "unit": "mg/kg", "route": "IV" }] }, "functions": "Agente anticolinesterasa de acción ultracorta. Se utiliza para el diagnóstico de la miastenia gravis.", "recommendations": "Una respuesta positiva es una mejora dramática y transitoria de la fuerza muscular. Tener atropina a mano para tratar una posible crisis colinérgica.", "precautions": "Puede causar una crisis colinérgica (salivación, bradicardia, vómitos).", "contraindications": "Bradicardia, obstrucción mecánica del tracto GI o urinario.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Neostigmina", "Piridostigmina"] },
  { "name": "Emodepside", "commercial_names": ["Profender® (combinado con Praziquantel)"], "concentration": { "Solución Tópica (spot-on)": "21.4 mg/mL" }, "doses": { "Gatos": [{ "purpose": "Antihelmíntico (nematodos)", "dose_range_min": 3, "dose_range_rec": 3, "dose_range_max": 3, "unit": "mg/kg", "route": "Tópica", "frequency": "Dosis única" }] }, "functions": "Antihelmíntico depsipéptido. Actúa sobre los receptores de latrofilina en los parásitos, causando parálisis flácida. Es eficaz contra gusanos redondos y anquilostomas.", "recommendations": "Disponible como una formulación tópica de amplio espectro para gatos.", "precautions": "Muy seguro. Puede causar salivación o vómitos transitorios si el gato lame el sitio de aplicación.", "contraindications": "Gatitos de menos de 8 semanas de edad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Pirantel Pamoato", "Selamectina"] },
  { "name": "Enflurano", "commercial_names": ["Ethrane®"], "concentration": { "Líquido para inhalación": "100%" }, "doses": { "Todas las especies": [{ "purpose": "Anestésico general inhalatorio", "dose_range_min": 3, "dose_range_rec": 4, "dose_range_max": 5, "unit": "% para inducción; 1.5-3% para mantenimiento", "route": "Inhalatoria" }] }, "functions": "Anestésico general inhalatorio, similar al isoflurano pero con mayor metabolismo.", "recommendations": "Su uso ha sido mayormente reemplazado por isoflurano y sevoflurano debido a su mayor potencial de depresión miocárdica y su efecto proconvulsivante.", "precautions": "Causa depresión cardiovascular y respiratoria dosis-dependiente. Disminuye el umbral convulsivo.", "contraindications": "Historial de convulsiones, insuficiencia renal.", "interactions": { "summary": "Potencia los efectos de los bloqueadores neuromusculares.", "specifics": [] }, "substitutes": ["Isoflurano", "Sevoflurano"] },
  { "name": "Eprinomectina", "commercial_names": ["Eprinex®"], "concentration": { "Solución Tópica (pour-on)": "5 mg/mL" }, "doses": { "Bovinos": [{ "purpose": "Endectocida", "dose_range_min": 500, "dose_range_rec": 500, "dose_range_max": 500, "unit": "mcg/kg", "route": "Tópica (pour-on)", "frequency": "Dosis única" }] }, "functions": "Endectocida macrólido de la familia de las avermectinas. Eficaz contra una amplia gama de parásitos internos y externos en ganado.", "recommendations": "Una ventaja clave es que no tiene tiempo de retiro para la leche, por lo que es seguro de usar en vacas lecheras en lactación.", "precautions": "Muy seguro. No usar en otras especies sin consultar.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Doramectina", "Ivermectina"] },
  { "name": "Epsiprantel", "commercial_names": ["Cestex®"], "concentration": { "Tabletas": "12.5 mg" }, "doses": { "Perros": [{ "purpose": "Tratamiento de cestodos (tenias)", "dose_range_min": 5.5, "dose_range_rec": 5.5, "dose_range_max": 5.5, "unit": "mg/kg", "route": "PO", "frequency": "Dosis única" }], "Gatos": [{ "purpose": "Tratamiento de cestodos (tenias)", "dose_range_min": 2.75, "dose_range_rec": 2.75, "dose_range_max": 2.75, "unit": "mg/kg", "route": "PO", "frequency": "Dosis única" }] }, "functions": "Antihelmíntico anticestodal. Similar al praziquantel, pero con menor absorción sistémica. Es eficaz contra Dipylidium caninum y Taenia pisiformis.", "recommendations": "Alternativa al praziquantel. No es eficaz contra Echinococcus.", "precautions": "Muy seguro. Rara vez puede causar vómitos o diarrea.", "contraindications": "Cachorros o gatitos de menos de 7 semanas de edad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Praziquantel", "Fenbendazol"] },
  { "name": "Esomeprazol", "commercial_names": ["Nexium®"], "concentration": { "Tabletas de liberación retardada": "20 mg" }, "doses": { "Perros": [{ "purpose": "Tratamiento de úlceras gástricas, esofagitis", "dose_range_min": 0.5, "dose_range_rec": 1, "dose_range_max": 1, "unit": "mg/kg", "route": "PO, IV", "frequency": "c/12-24h" }], "Gatos": [{ "purpose": "Tratamiento de úlceras gástricas, esofagitis", "dose_range_min": 0.5, "dose_range_rec": 1, "dose_range_max": 1, "unit": "mg/kg", "route": "PO, IV", "frequency": "c/12-24h" }] }, "functions": "Inhibidor de la bomba de protones. Es el S-isómero del omeprazol y puede ofrecer una supresión del ácido más consistente.", "recommendations": "Alternativa al omeprazol y pantoprazol. Administrar 30-60 minutos antes de la comida.", "precautions": "Generalmente muy seguro.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "Puede disminuir la absorción de fármacos que requieren un pH ácido.", "specifics": [] }, "substitutes": ["Omeprazol", "Pantoprazol", "Famotidina"] },
  { "name": "Estriol", "commercial_names": ["Incurin®"], "concentration": { "Tabletas": "1 mg" }, "doses": { "Perros": [{ "purpose": "Incontinencia urinaria responsiva a hormonas (hembras esterilizadas)", "dose_range_min": 0.5, "dose_range_rec": 1, "dose_range_max": 2, "unit": "mg/perra", "route": "PO", "frequency": "c/24h, luego reducir a la dosis efectiva más baja" }] }, "functions": "Estrógeno natural de acción corta. Se utiliza para tratar la incontinencia urinaria en perras esterilizadas al aumentar el tono del esfínter uretral.", "recommendations": "Considerado más seguro que el DES debido a su corta duración de acción y menor afinidad por los receptores de estrógeno. La dosis se reduce a la mínima efectiva para el mantenimiento (a menudo cada 2-3 días).", "precautions": "Puede causar signos de estro (hinchazón vulvar, secreción) y atractivo para los machos. El riesgo de supresión de la médula ósea es muy bajo.", "contraindications": "Gestación, hembras intactas.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Fenilpropanolamina (PPA)", "Dietilestilbestrol (DES)"] },
  { "name": "Etamsilato", "commercial_names": ["Dicynone®"], "concentration": { "Tabletas": "500 mg", "Solución Inyectable": "125 mg/mL" }, "doses": { "Perros": [{ "purpose": "Agente hemostático (profilaxis y tratamiento de hemorragias capilares)", "dose_range_min": 10, "dose_range_rec": 12.5, "dose_range_max": 15, "unit": "mg/kg", "route": "IV, IM, PO", "frequency": "c/6h" }], "Gatos": [{ "purpose": "Agente hemostático", "dose_range_min": 10, "dose_range_rec": 12.5, "dose_range_max": 15, "unit": "mg/kg", "route": "IV, IM, PO", "frequency": "c/6h" }] }, "functions": "Agente hemostático no antifibrinolítico. Se cree que mejora la adhesión plaquetaria y la resistencia capilar.", "recommendations": "Su eficacia clínica es controvertida. Se utiliza para controlar el sangrado difuso capilar durante y después de la cirugía.", "precautions": "Generalmente bien tolerado.", "contraindications": "Porfiria aguda.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Vitamina K1", "Ácido Tranexámico"] },
  { "name": "Etanol", "commercial_names": ["Alcohol Etílico"], "concentration": { "Solución Inyectable": "95%" }, "doses": { "Perros": [{ "purpose": "Antídoto para intoxicación por etilenglicol", "dose_range_min": 5.5, "dose_range_rec": 5.5, "dose_range_max": 5.5, "unit": "mL/kg de etanol al 20%", "route": "Infusión IV continua", "frequency": "Durante 48-72h" }] }, "functions": "Antídoto para la intoxicación por etilenglicol. Compite con el etilenglicol por la enzima alcohol deshidrogenasa, previniendo la formación de metabolitos tóxicos.", "recommendations": "Ha sido completamente reemplazado por el fomepizol (4-MP), que es mucho más seguro, eficaz y fácil de administrar.", "precautions": "Requiere una infusión continua y monitoreo intensivo. Causa depresión severa del SNC, diuresis osmótica y acidosis metabólica.", "contraindications": "Depresión severa del SNC.", "interactions": { "summary": "Potencia el efecto de otros depresores del SNC.", "specifics": [] }, "substitutes": ["Fomepizol (4-MP)"] },
  { "name": "Etil Lactato", "commercial_names": ["Etiderm®"], "concentration": { "Champú": "10%" }, "doses": { "Perros": [{ "purpose": "Champú antibacteriano para pioderma superficial", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "baño", "route": "Tópica", "frequency": "1-2 veces por semana" }] }, "functions": "Agente queratolítico y antibacteriano. Se metaboliza en la piel a ácido láctico y etanol, disminuyendo el pH de la piel y teniendo un efecto antibacteriano.", "recommendations": "Es menos irritante y resecante que el peróxido de benzoílo. Dejar actuar por 5-10 minutos antes de enjuagar.", "precautions": "Muy seguro.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Clorhexidina (champú)", "Peróxido de Benzoílo (champú)"] },
  { "name": "Febantel", "commercial_names": ["Drontal Plus® (combinado)"], "concentration": { "Tabletas": "Variable (combinado)" }, "doses": { "Perros": [{ "purpose": "Antihelmíntico (nematodos y Giardia)", "dose_range_min": 15, "dose_range_rec": 15, "dose_range_max": 15, "unit": "mg/kg", "route": "PO", "frequency": "c/24h por 3 días" }] }, "functions": "Profármaco antihelmíntico que se metaboliza en el cuerpo a fenbendazol y oxfendazol.", "recommendations": "Casi siempre se encuentra en combinación con pirantel y praziquantel para crear un desparasitante de espectro muy amplio.", "precautions": "Muy seguro. No usar en hembras gestantes.", "contraindications": "Gestación.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Fenbendazol"] },
  { "name": "Fipronil", "commercial_names": ["Frontline®"], "concentration": { "Solución Tópica (spot-on)": "9.8%" }, "doses": { "Perros": [{ "purpose": "Tratamiento y prevención de pulgas y garrapatas", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "pipeta según peso", "route": "Tópica", "frequency": "Mensual" }], "Gatos": [{ "purpose": "Tratamiento y prevención de pulgas y garrapatas", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "pipeta según peso", "route": "Tópica", "frequency": "Mensual" }] }, "functions": "Insecticida/acaricida de amplio espectro. Actúa bloqueando los canales de cloruro mediados por GABA en los parásitos, causando parálisis.", "recommendations": "Se acumula en las glándulas sebáceas y se libera lentamente sobre la piel y el pelo. Evitar bañar al animal 48h antes o después de la aplicación.", "precautions": "Puede causar irritación cutánea transitoria en el sitio de aplicación. NO USAR EN CONEJOS, es tóxico.", "contraindications": "Hipersensibilidad. ABSOLUTAMENTE CONTRAINDICADO EN CONEJOS.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Isoxazolinas (Bravecto, Nexgard, Simparica)", "Selamectina"] },
  { "name": "Flumetasona", "commercial_names": ["Anaprime® (combinado)"], "concentration": { "Ungüento Tópico": "Variable" }, "doses": { "Perros": [{ "purpose": "Antiinflamatorio esteroideo tópico", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "aplicación", "route": "Tópica", "frequency": "c/8-12h" }] }, "functions": "Corticosteroide fluorado potente para uso tópico. Se utiliza para reducir la inflamación y el prurito en dermatosis localizadas.", "recommendations": "Comúnmente se encuentra en preparaciones óticas y dérmicas en combinación con antibióticos y antifúngicos.", "precautions": "La absorción sistémica puede ocurrir con el uso crónico o en grandes áreas de piel, pudiendo causar efectos de hiperadrenocorticismo iatrogénico.", "contraindications": "Infecciones cutáneas virales o fúngicas no tratadas.", "interactions": { "summary": "No se han reportado interacciones con el uso tópico adecuado.", "specifics": [] }, "substitutes": ["Betametasona (tópica)", "Hidrocortisona (tópica)"] },
  { "name": "Flurbiprofeno", "commercial_names": ["Ocufen®"], "concentration": { "Solución Oftálmica": "0.03%" }, "doses": { "Perros": [{ "purpose": "Antiinflamatorio oftálmico (uveítis, postoperatorio)", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/6-8h" }], "Gatos": [{ "purpose": "Antiinflamatorio oftálmico", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/6-8h" }] }, "functions": "Antiinflamatorio no esteroideo (AINE) para uso oftálmico. Se utiliza para el control de la inflamación ocular.", "recommendations": "Se utiliza para prevenir la miosis intraoperatoria durante la cirugía de cataratas y para el manejo de la uveítis.", "precautions": "Puede retrasar la cicatrización corneal. Su uso sistémico en gatos está asociado a insuficiencia renal aguda.", "contraindications": "Úlcera corneal infectada.", "interactions": { "summary": "Usar con cautela con corticosteroides tópicos.", "specifics": [] }, "substitutes": ["Diclofenaco (oftálmico)", "Ketorolaco (oftálmico)"] },
  { "name": "Halotano", "commercial_names": ["Fluothane®"], "concentration": { "Líquido para inhalación": "100%" }, "doses": { "Todas las especies": [{ "purpose": "Anestésico general inhalatorio", "dose_range_min": 2, "dose_range_rec": 3, "dose_range_max": 4, "unit": "% para inducción; 0.5-2% para mantenimiento", "route": "Inhalatoria" }] }, "functions": "Anestésico general inhalatorio. Fue uno de los primeros anestésicos inhalatorios modernos.", "recommendations": "SU USO HA SIDO COMPLETAMENTE REEMPLAZADO por agentes más seguros como el isoflurano y el sevoflurano, que tienen menos efectos cardiovasculares adversos.", "precautions": "Es un potente depresor miocárdico y sensibiliza el corazón a las arritmias inducidas por catecolaminas. Puede causar hepatotoxicidad ('hepatitis por halotano').", "contraindications": "Enfermedad hepática severa, historial de hipertermia maligna.", "interactions": { "summary": "Potencia los efectos de los bloqueadores neuromusculares.", "specifics": [] }, "substitutes": ["Isoflurano", "Sevoflurano"] },
  { "name": "Hialuronato Sódico", "commercial_names": ["Legend®", "Hyalovet®"], "concentration": { "Solución Inyectable": "10 mg/mL" }, "doses": { "Equinos": [{ "purpose": "Tratamiento de la enfermedad articular degenerativa", "dose_range_min": 20, "dose_range_rec": 20, "dose_range_max": 40, "unit": "mg/articulación o por vía IV", "route": "Intraarticular, IV", "frequency": "Semanalmente por 3 semanas" }] }, "functions": "Glicosaminoglicano, un componente principal del líquido sinovial y del cartílago articular. Se utiliza para mejorar la viscosidad del líquido sinovial y por sus efectos antiinflamatorios.", "recommendations": "Se utiliza para el tratamiento de la sinovitis y la osteoartritis en caballos.", "precautions": "Puede causar una reacción inflamatoria transitoria después de la inyección intraarticular.", "contraindications": "Infección articular.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Polisulfato de Glicosaminoglicano", "Corticosteroides intraarticulares"] },
  { "name": "Idoxuridina", "commercial_names": ["Herplex®"], "concentration": { "Solución Oftálmica (compounding)": "0.1%" }, "doses": { "Gatos": [{ "purpose": "Queratitis por Herpesvirus Felino (FHV-1)", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "Cada 1-2 horas" }] }, "functions": "Agente antiviral tópico análogo de la timidina. Interfiere con la síntesis de ADN viral.", "recommendations": "Requiere una aplicación extremadamente frecuente para ser eficaz y ha sido mayormente reemplazado por otros antivirales. Requiere compounding.", "precautions": "Puede causar irritación ocular.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Trifluridina", "Cidofovir", "Famciclovir (oral)"] },
  { "name": "Inmunoglobulina", "commercial_names": ["Inmunoglobulina Humana IV (IVIG)"], "concentration": { "Solución Inyectable": "5%" }, "doses": { "Perros": [{ "purpose": "Tratamiento de enfermedades inmunomediadas graves (AHIM, PTI)", "dose_range_min": 0.5, "dose_range_rec": 1, "dose_range_max": 1.5, "unit": "g/kg", "route": "Infusión IV lenta (durante 6-12 horas)", "frequency": "Dosis única" }] }, "functions": "Producto derivado del plasma humano que contiene inmunoglobulinas policlonales (principalmente IgG). Se cree que modula la respuesta inmune a través de varios mecanismos.", "recommendations": "Se utiliza como terapia de rescate para enfermedades inmunomediadas potencialmente mortales y refractarias al tratamiento estándar. Es un tratamiento muy costoso.", "precautions": "Puede causar reacciones anafilácticas, sobrecarga de volumen e insuficiencia renal aguda.", "contraindications": "Insuficiencia renal, insuficiencia cardiaca congestiva.", "interactions": { "summary": "Puede interferir con la respuesta a las vacunas.", "specifics": [] }, "substitutes": ["Ciclosporina", "Micofenolato", "Leflunomida"] },
  { "name": "Ipodato", "commercial_names": ["Oragrafin®"], "concentration": { "Cápsulas": "500 mg" }, "doses": { "Gatos": [{ "purpose": "Tratamiento de hipertiroidismo (preparación para tiroidectomía)", "dose_range_min": 15, "dose_range_rec": 15, "dose_range_max": 30, "unit": "mg/kg", "route": "PO", "frequency": "c/12h" }] }, "functions": "Agente de contraste yodado oral que también inhibe la conversión periférica de T4 a T3, la forma más activa de la hormona tiroidea.", "recommendations": "Se utiliza para estabilizar rápidamente a los gatos hipertiroideos antes de la cirugía o el tratamiento con yodo radioactivo.", "precautions": "Puede causar malestar gastrointestinal.", "contraindications": "Hipersensibilidad al yodo.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Metimazol", "Propranolol"] },
  { "name": "Isoxuprina HCl", "commercial_names": ["Vasodilan®"], "concentration": { "Tabletas": "10 mg" }, "doses": { "Equinos": [{ "purpose": "Vasodilatador para enfermedad navicular y laminitis", "dose_range_min": 0.6, "dose_range_rec": 0.9, "dose_range_max": 1.2, "unit": "mg/kg", "route": "PO", "frequency": "c/12h" }] }, "functions": "Vasodilatador periférico. Se cree que mejora el flujo sanguíneo al casco.", "recommendations": "La evidencia de su eficacia es limitada y controvertida. Puede tardar varias semanas en mostrar efecto.", "precautions": "Puede causar taquicardia e hipotensión.", "contraindications": "Hemorragia activa.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Pentoxifilina"] },
  { "name": "Leflunomida", "commercial_names": ["Arava®"], "concentration": { "Tabletas": "20 mg" }, "doses": { "Perros": [{ "purpose": "Inmunosupresor (poliartritis inmunomediada, AHIM, lupus)", "dose_range_min": 2, "dose_range_rec": 3, "dose_range_max": 4, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }] }, "functions": "Inmunomodulador que inhibe la síntesis de pirimidinas, afectando la proliferación de linfocitos. Es un profármaco que se convierte en su metabolito activo, la teriflunomida.", "recommendations": "Alternativa a la azatioprina o ciclosporina para el tratamiento de enfermedades inmunomediadas.", "precautions": "Puede causar supresión de la médula ósea, toxicidad gastrointestinal y hepatotoxicidad. Requiere monitoreo hematológico.", "contraindications": "Gestación, enfermedad hepática severa.", "interactions": { "summary": "No usar con otros inmunosupresores sin precaución.", "specifics": [] }, "substitutes": ["Micofenolato", "Azatioprina", "Ciclosporina"] },
  { "name": "Levamisol", "commercial_names": ["Tramisol®"], "concentration": { "Polvo soluble": "Variable", "Solución Inyectable": "136.5 mg/mL" }, "doses": { "Perros": [{ "purpose": "Microfilaricida (D. immitis), inmunomodulador", "dose_range_min": 5, "dose_range_rec": 7.5, "dose_range_max": 10, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }], "Bovinos": [{ "purpose": "Antihelmíntico (nematodos GI y pulmonares)", "dose_range_min": 8, "dose_range_rec": 8, "dose_range_max": 8, "unit": "mg/kg", "route": "SC, PO" }], "Aves": [{ "purpose": "Antihelmíntico, inmunomodulador", "dose_range_min": 10, "dose_range_rec": 25, "dose_range_max": 50, "unit": "mg/kg", "route": "PO, IM, en agua de bebida" }] }, "functions": "Antihelmíntico imidazotiazol con propiedades inmunomoduladoras. Restaura la función de los linfocitos T deprimidos.", "recommendations": "Su uso como microfilaricida ha sido reemplazado por las lactonas macrólidas. Su uso como inmunomodulador es extra-etiqueta.", "precautions": "Tiene un margen de seguridad estrecho. Puede causar signos colinérgicos (salivación, temblores, vómitos) y neurotoxicidad.", "contraindications": "Enfermedad hepática o renal severa.", "interactions": { "summary": "No usar con pirantel o morantel.", "specifics": [] }, "substitutes": ["Ivermectina (como microfilaricida)", "Fenbendazol"] },
  { "name": "Levofloxacina", "commercial_names": ["Levaquin®"], "concentration": { "Solución Oftálmica": "0.5%" }, "doses": { "Perros": [{ "purpose": "Antibiótico oftálmico de amplio espectro", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/6-8h" }], "Gatos": [{ "purpose": "Antibiótico oftálmico", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/6-8h" }] }, "functions": "Antibiótico fluoroquinolona de tercera generación para uso oftálmico. Tiene un espectro más amplio contra bacterias Gram-positivas que las fluoroquinolonas más antiguas.", "recommendations": "Excelente penetración ocular. Alternativa a otras fluoroquinolonas tópicas.", "precautions": "El uso sistémico puede causar los efectos secundarios típicos de las fluoroquinolonas.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Ofloxacino", "Moxifloxacina", "Ciprofloxacina (oftálmica)"] },
  { "name": "Linezolid", "commercial_names": ["Zyvox®"], "concentration": { "Tabletas": "600 mg" }, "doses": { "Perros": [{ "purpose": "Infecciones por Gram-positivos resistentes (VRE, MRSA)", "dose_range_min": 10, "dose_range_rec": 15, "dose_range_max": 20, "unit": "mg/kg", "route": "PO", "frequency": "c/8-12h" }] }, "functions": "Antibiótico oxazolidinona. Es un fármaco de 'último recurso' para infecciones graves causadas por bacterias Gram-positivas multirresistentes, como los enterococos resistentes a la vancomicina (VRE).", "recommendations": "Su uso debe basarse estrictamente en cultivo y sensibilidad para prevenir la resistencia.", "precautions": "El uso a largo plazo puede causar supresión de la médula ósea y neuropatía periférica.", "contraindications": "No usar con inhibidores de la MAO.", "interactions": { "summary": "Es un inhibidor reversible y no selectivo de la MAO.", "specifics": [] }, "substitutes": ["Vancomicina", "Cloranfenicol"] },
  { "name": "Loratadina", "commercial_names": ["Claritin®"], "concentration": { "Tabletas": "10 mg" }, "doses": { "Perros": [{ "purpose": "Dermatitis atópica, prurito", "dose_range_min": 5, "dose_range_rec": 5, "dose_range_max": 10, "unit": "mg/perro", "route": "PO", "frequency": "c/24h" }] }, "functions": "Antihistamínico de segunda generación, no sedante.", "recommendations": "Alternativa a la cetirizina. Su eficacia es variable.", "precautions": "Muy seguro. Puede causar sedación leve en algunos individuos.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones significativas.", "specifics": [] }, "substitutes": ["Cetirizina", "Hidroxicina", "Oclacitinib"] },
  { "name": "Mesalamina", "commercial_names": ["Asacol®", "Pentasa®"], "concentration": { "Tabletas de liberación retardada": "400 mg" }, "doses": { "Perros": [{ "purpose": "Antiinflamatorio intestinal (colitis)", "dose_range_min": 10, "dose_range_rec": 15, "dose_range_max": 20, "unit": "mg/kg", "route": "PO", "frequency": "c/8h" }] }, "functions": "Agente antiinflamatorio (5-aminosalicilato, 5-ASA). Es el componente activo de la sulfasalazina, con acción antiinflamatoria tópica sobre la mucosa del colon.", "recommendations": "Las diferentes formulaciones están diseñadas para liberar el fármaco en distintas partes del intestino. Ofrece el beneficio antiinflamatorio de la sulfasalazina sin los efectos secundarios de la sulfa.", "precautions": "Puede causar queratoconjuntivitis seca (KCS), aunque el riesgo es mucho menor que con la sulfasalazina.", "contraindications": "Hipersensibilidad a los salicilatos.", "interactions": { "summary": "Puede disminuir la absorción de digoxina.", "specifics": [] }, "substitutes": ["Sulfasalazina", "Tilosina", "Metronidazol"] },
  { "name": "Metilcelulosa", "commercial_names": ["Citrucel®"], "concentration": { "Polvo": "Variable" }, "doses": { "Perros": [{ "purpose": "Laxante formador de bolo (fibra)", "dose_range_min": 1, "dose_range_rec": 2, "dose_range_max": 4, "unit": "cucharaditas por comida", "route": "PO" }], "Gatos": [{ "purpose": "Estreñimiento, diarrea de intestino grueso", "dose_range_min": 1, "dose_range_rec": 2, "dose_range_max": 4, "unit": "cucharaditas por comida", "route": "PO" }] }, "functions": "Fibra sintética formadora de bolo. Aumenta el contenido de agua de las heces para normalizar la consistencia.", "recommendations": "Alternativa al psyllium. Asegurar un consumo de agua adecuado.", "precautions": "Muy seguro. Puede causar flatulencia e hinchazón.", "contraindications": "Obstrucción intestinal.", "interactions": { "summary": "Puede disminuir la absorción de otros fármacos orales.", "specifics": [] }, "substitutes": ["Psyllium", "Pulpa de remolacha"] },
  { "name": "Metilprednisolona", "commercial_names": ["Medrol®"], "concentration": { "Tabletas": "4 mg" }, "doses": { "Perros": [{ "purpose": "Antiinflamatorio", "dose_range_min": 0.4, "dose_range_rec": 0.8, "dose_range_max": 0.8, "unit": "mg/kg", "route": "PO", "frequency": "c/12-24h" }, { "purpose": "Inmunosupresor", "dose_range_min": 1.5, "dose_range_rec": 3, "dose_range_max": 3, "unit": "mg/kg", "route": "PO", "frequency": "c/12-24h" }], "Gatos": [{ "purpose": "Antiinflamatorio/Inmunosupresor", "dose_range_min": 1, "dose_range_rec": 2, "dose_range_max": 4, "unit": "mg/kg", "route": "PO", "frequency": "c/12-24h" }] }, "functions": "Glucocorticoide sintético de acción intermedia, ligeramente más potente que la prednisolona y con menor actividad mineralocorticoide.", "recommendations": "Alternativa a la prednisolona. El tratamiento debe reducirse gradualmente.", "precautions": "Similar a otros corticosteroides (PU/PD/PP, inmunosupresión).", "contraindications": "Infecciones fúngicas sistémicas, úlceras corneales. No usar con AINEs.", "interactions": { "summary": "Alto riesgo de úlceras GI con AINEs.", "specifics": [] }, "substitutes": ["Prednisolona", "Dexametasona"] },
  { "name": "Mexiletina", "commercial_names": ["Mexitil®"], "concentration": { "Cápsulas": "150 mg" }, "doses": { "Perros": [{ "purpose": "Antiarrítmico oral para arritmias ventriculares", "dose_range_min": 5, "dose_range_rec": 8, "dose_range_max": 10, "unit": "mg/kg", "route": "PO", "frequency": "c/8h" }] }, "functions": "Antiarrítmico de clase Ib, análogo oral de la lidocaína. Se utiliza para el manejo a largo plazo de las arritmias ventriculares.", "recommendations": "A menudo se usa en combinación con un betabloqueador (atenolol, sotalol) para un mejor control de la arritmia.", "precautions": "Puede causar temblores, convulsiones y malestar gastrointestinal.", "contraindications": "Bloqueo AV de alto grado, shock cardiogénico.", "interactions": { "summary": "Fármacos que afectan las enzimas hepáticas pueden alterar sus niveles.", "specifics": [] }, "substitutes": ["Sotalol", "Amiodarona"] },
  { "name": "Milrinona", "commercial_names": ["Primacor®"], "concentration": { "Solución Inyectable": "1 mg/mL" }, "doses": { "Perros": [{ "purpose": "Soporte inotrópico en insuficiencia cardiaca aguda", "dose_range_min": 0.25, "dose_range_rec": 0.5, "dose_range_max": 1, "unit": "mcg/kg/min", "route": "Infusión IV continua" }] }, "functions": "Inodilatador (inhibidor de la fosfodiesterasa III). Aumenta la contractilidad cardíaca y causa vasodilatación arterial y venosa.", "recommendations": "Se utiliza en cuidados intensivos para el manejo de la insuficiencia cardíaca congestiva grave y refractaria.", "precautions": "Puede causar hipotensión y arritmias.", "contraindications": "Hipotensión severa.", "interactions": { "summary": "Efectos aditivos con otros vasodilatadores.", "specifics": [] }, "substitutes": ["Dobutamina", "Pimobendan"] },
  { "name": "Monensina", "commercial_names": ["Rumensin®"], "concentration": { "Premezcla medicada": "Variable" }, "doses": { "Bovinos": [{ "purpose": "Preventivo de coccidiosis, promotor del crecimiento", "dose_range_min": 10, "dose_range_rec": 20, "dose_range_max": 30, "unit": "g/tonelada de alimento", "route": "PO" }] }, "functions": "Antibiótico ionóforo. Altera el transporte de iones a través de las membranas celulares, actuando como coccidiostato y modificando la población microbiana del rumen para mejorar la eficiencia alimenticia.", "recommendations": "Se utiliza como aditivo en el alimento para ganado.", "precautions": "EXTREMADAMENTE TÓXICO PARA CABALLOS Y OTRAS ESPECIES NO RUMIANTES. La intoxicación causa daño muscular y cardiaco severo y a menudo es fatal.", "contraindications": "NO USAR EN CABALLOS. No usar con tiamulina.", "interactions": { "summary": "Interacción fatal con tiamulina.", "specifics": [] }, "substitutes": ["Lasalocid", "Decoquinato"] },
  { "name": "Moxifloxacina", "commercial_names": ["Vigamox®", "Avelox®"], "concentration": { "Solución Oftálmica": "0.5%" }, "doses": { "Perros": [{ "purpose": "Antibiótico oftálmico de amplio espectro", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/8-12h" }], "Gatos": [{ "purpose": "Antibiótico oftálmico", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/8-12h" }] }, "functions": "Antibiótico fluoroquinolona de cuarta generación para uso oftálmico. Tiene un espectro más amplio y una mejor actividad contra bacterias Gram-positivas y anaerobios que las generaciones anteriores.", "recommendations": "Excelente penetración ocular. Es una de las fluoroquinolonas tópicas de primera elección.", "precautions": "Muy seguro para uso tópico.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Ofloxacino", "Levofloxacina", "Gatifloxacina"] },
  { "name": "Netilmicina", "commercial_names": ["Netromycin®"], "concentration": { "Solución Oftálmica": "0.3%" }, "doses": { "Perros": [{ "purpose": "Antibiótico oftálmico (aminoglucósido)", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/6-8h" }], "Gatos": [{ "purpose": "Antibiótico oftálmico", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/6-8h" }] }, "functions": "Antibiótico aminoglucósido semisintético, similar a la gentamicina y tobramicina. Se utiliza tópicamente para infecciones oculares.", "recommendations": "Activo contra bacterias Gram-negativas, incluyendo Pseudomonas.", "precautions": "Muy seguro para uso tópico.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Tobramicina", "Gentamicina (oftálmica)"] },
  { "name": "Nitazoxanida", "commercial_names": ["Alinia®"], "concentration": { "Tabletas": "500 mg" }, "doses": { "Perros": [{ "purpose": "Antiprotozoario (Giardia, Criptosporidium)", "dose_range_min": 25, "dose_range_rec": 50, "dose_range_max": 75, "unit": "mg/kg", "route": "PO", "frequency": "c/12h por 5 días" }] }, "functions": "Antiprotozoario de amplio espectro. Interfiere con el metabolismo energético del parásito.", "recommendations": "Se utiliza para el tratamiento de la criptosporidiosis y la giardiasis refractaria.", "precautions": "Puede causar vómitos y diarrea.", "contraindications": "Enfermedad hepática severa.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Metronidazol", "Fenbendazol", "Paromomicina"] },
  { "name": "Norepinefrina", "commercial_names": ["Levophed®"], "concentration": { "Solución Inyectable": "1 mg/mL" }, "doses": { "Perros": [{ "purpose": "Vasopresor en shock séptico o shock refractario", "dose_range_min": 0.1, "dose_range_rec": 0.5, "dose_range_max": 2, "unit": "mcg/kg/min", "route": "Infusión IV continua" }], "Gatos": [{ "purpose": "Vasopresor en shock", "dose_range_min": 0.1, "dose_range_rec": 0.5, "dose_range_max": 2, "unit": "mcg/kg/min", "route": "Infusión IV continua" }] }, "functions": "Catecolamina con potentes efectos alfa-adrenérgicos y menores efectos beta-adrenérgicos. Es un potente vasopresor que aumenta la presión arterial.", "recommendations": "Es el vasopresor de elección para el shock séptico. Requiere administración por infusión continua a través de un catéter venoso central y monitoreo invasivo de la presión arterial.", "precautions": "Puede causar hipertensión severa, arritmias y disminución de la perfusión a órganos vitales. La extravasación causa necrosis tisular severa.", "contraindications": "Hipotensión causada por hipovolemia (corregir primero el volumen).", "interactions": { "summary": "Los efectos se potencian con inhibidores de la MAO.", "specifics": [] }, "substitutes": ["Dopamina", "Vasopresina"] },
  { "name": "Oclacitinib", "commercial_names": ["Apoquel®"], "concentration": { "Tabletas": "5.4 mg" }, "doses": { "Perros": [{ "purpose": "Control del prurito asociado a dermatitis alérgica y atópica", "dose_range_min": 0.4, "dose_range_rec": 0.5, "dose_range_max": 0.6, "unit": "mg/kg", "route": "PO", "frequency": "c/12h por 14 días, luego c/24h" }] }, "functions": "Inhibidor de la Janus Kinasa (JAK). Bloquea selectivamente las citoquinas proinflamatorias y pruritogénicas (que causan picor).", "recommendations": "Proporciona un alivio rápido del picor (en horas). Se puede administrar con o sin comida.", "precautions": "Puede aumentar la susceptibilidad a infecciones (urinarias, respiratorias, demodicosis). Puede exacerbar neoplasias. Requiere monitoreo hematológico y bioquímico periódico.", "contraindications": "Perros de menos de 12 meses de edad, infecciones graves, historial de neoplasia.", "interactions": { "summary": "No se han reportado interacciones significativas.", "specifics": [] }, "substitutes": ["Lokivetmab", "Ciclosporina", "Corticosteroides"] },
  { "name": "Orbifloxacina", "commercial_names": ["Orbax®"], "concentration": { "Tabletas": "22.7 mg" }, "doses": { "Perros": [{ "purpose": "Infecciones de piel, tejidos blandos y urinarias", "dose_range_min": 2.5, "dose_range_rec": 5, "dose_range_max": 7.5, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }], "Gatos": [{ "purpose": "Infecciones de piel y tejidos blandos", "dose_range_min": 7.5, "dose_range_rec": 7.5, "dose_range_max": 7.5, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }] }, "functions": "Antibiótico fluoroquinolona de tercera generación. Similar a la enrofloxacina y marbofloxacina.", "recommendations": "Alternativa a otras fluoroquinolonas aprobadas para uso veterinario.", "precautions": "Puede causar daño al cartílago articular en animales en crecimiento. El riesgo de retinopatía en gatos es bajo.", "contraindications": "Animales en crecimiento, hipersensibilidad.", "interactions": { "summary": "La absorción se reduce con antiácidos y suplementos minerales.", "specifics": [] }, "substitutes": ["Enrofloxacina", "Marbofloxacina", "Pradofloxacina"] },
  { "name": "Pefloxacina", "commercial_names": ["Peflacine®"], "concentration": { "Tabletas": "400 mg" }, "doses": { "Perros": [{ "purpose": "Infecciones bacterianas", "dose_range_min": 10, "dose_range_rec": 15, "dose_range_max": 20, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }] }, "functions": "Antibiótico fluoroquinolona. Su uso en veterinaria es limitado.", "recommendations": "Existen fluoroquinolonas más modernas y mejor estudiadas para uso veterinario.", "precautions": "Similar a otras fluoroquinolonas (artropatía, retinopatía).", "contraindications": "Animales en crecimiento.", "interactions": { "summary": "La absorción se reduce con antiácidos.", "specifics": [] }, "substitutes": ["Enrofloxacina", "Marbofloxacina"] },
  { "name": "Pimecrolimus", "commercial_names": ["Elidel®"], "concentration": { "Crema": "1%" }, "doses": { "Perros": [{ "purpose": "Dermatitis atópica (lesiones focales), lupus discoide", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "aplicación", "route": "Tópica", "frequency": "c/12h" }] }, "functions": "Inmunomodulador macrólido tópico (inhibidor de la calcineurina), similar al tacrolimus.", "recommendations": "Alternativa al tacrolimus para el tratamiento de dermatosis inmunomediadas focales.", "precautions": "Puede causar irritación local.", "contraindications": "Infecciones cutáneas activas.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Tacrolimus", "Corticosteroides tópicos"] },
  { "name": "Pirlimicina", "commercial_names": ["Pirsue®"], "concentration": { "Infusión Intramamaria": "50 mg/jeringa" }, "doses": { "Bovinos": [{ "purpose": "Tratamiento de mastitis subclínica y clínica", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "jeringa por cuarto", "route": "Intramamaria", "frequency": "c/24h" }] }, "functions": "Antibiótico lincosamida, similar a la clindamicina, para uso intramamario en ganado lechero.", "recommendations": "Eficaz contra cocos Gram-positivos (Staphylococcus, Streptococcus) causantes de mastitis.", "precautions": "Respetar los tiempos de retiro.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Cefapirina", "Cloxacilina"] },
  { "name": "Polietilenglicol 3350", "commercial_names": ["MiraLAX®"], "concentration": { "Polvo": "Variable" }, "doses": { "Perros": [{ "purpose": "Laxante osmótico", "dose_range_min": 1, "dose_range_rec": 1.25, "dose_range_max": 2.5, "unit": "mL/kg de la solución reconstituida", "route": "PO", "frequency": "c/12h" }], "Gatos": [{ "purpose": "Estreñimiento, megacolon", "dose_range_min": 0.25, "dose_range_rec": 0.5, "dose_range_max": 1, "unit": "cucharadita de polvo/gato", "route": "PO", "frequency": "c/12-24h" }] }, "functions": "Laxante osmótico. Actúa reteniendo agua en las heces, ablandándolas y aumentando su volumen.", "recommendations": "Se mezcla con la comida. Se considera insípido e inodoro, por lo que es bien aceptado por los gatos. La dosis se ajusta hasta lograr la consistencia fecal deseada.", "precautions": "Muy seguro. La sobredosis puede causar diarrea.", "contraindications": "Obstrucción intestinal.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Lactulosa", "Cisaprida"] },
  { "name": "Polimixina B", "commercial_names": ["Neo-Poly-Bac® (combinado)"], "concentration": { "Ungüento/Solución Oftálmica": "10,000 UI/g o mL" }, "doses": { "Todas las especies": [{ "purpose": "Antibiótico oftálmico tópico (profilaxis y tratamiento)", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "aplicación", "route": "Tópica oftálmica", "frequency": "c/6-8h" }] }, "functions": "Antibiótico polipeptídico. Eficaz contra bacterias Gram-negativas, incluyendo Pseudomonas. Actúa dañando la membrana celular bacteriana.", "recommendations": "Casi siempre se encuentra en combinación con neomicina y bacitracina (ungüento) o gramicidina (solución) para un espectro muy amplio. Es una excelente opción de primera línea para úlceras corneales no complicadas.", "precautions": "Rara vez puede causar reacciones de hipersensibilidad. El uso sistémico es nefrotóxico.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Tobramicina", "Gentamicina (oftálmica)"] },
  { "name": "Pralmorelina", "commercial_names": ["GHRP-2"], "concentration": { "Polvo para reconstituir": "Variable" }, "doses": { "Perros": [{ "purpose": "Prueba diagnóstica de deficiencia de hormona de crecimiento", "dose_range_min": 30, "dose_range_rec": 30, "dose_range_max": 30, "unit": "mcg/kg", "route": "IV" }] }, "functions": "Secretagogo de la hormona del crecimiento. Se utiliza como agente de prueba para evaluar la capacidad de la pituitaria para secretar hormona de crecimiento.", "recommendations": "Alternativa a las pruebas de estimulación con clonidina o xilazina.", "precautions": "Puede causar salivación y enrojecimiento facial transitorios.", "contraindications": "Ninguna significativa.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Clonidina (prueba de estimulación)", "Xilazina (prueba de estimulación)"] },
  { "name": "Pradofloxacina", "commercial_names": ["Veraflox®"], "concentration": { "Suspensión Oral": "25 mg/mL" }, "doses": { "Gatos": [{ "purpose": "Infecciones de piel, heridas, abscesos", "dose_range_min": 5, "dose_range_rec": 7.5, "dose_range_max": 7.5, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }] }, "functions": "Antibiótico fluoroquinolona de tercera generación aprobado para uso en gatos. Tiene actividad mejorada contra bacterias anaerobias.", "recommendations": "Diseñado para tener un menor riesgo de retinopatía en gatos en comparación con fluoroquinolonas más antiguas.", "precautions": "Puede causar daño al cartílago articular en animales en crecimiento. Puede causar malestar gastrointestinal.", "contraindications": "Gatitos en crecimiento, gestación.", "interactions": { "summary": "La absorción se reduce con antiácidos y suplementos minerales.", "specifics": [] }, "substitutes": ["Marbofloxacina", "Enrofloxacina (con precaución)"] },
  { "name": "Propentofilina", "commercial_names": ["Vivitonin®", "Karsivan®"], "concentration": { "Tabletas": "50 mg" }, "doses": { "Perros": [{ "purpose": "Mejora de la microcirculación y oxigenación tisular en perros geriátricos", "dose_range_min": 3, "dose_range_rec": 5, "dose_range_max": 10, "unit": "mg/kg", "route": "PO", "frequency": "c/12h" }] }, "functions": "Derivado de la xantina que mejora el flujo sanguíneo, aumenta la flexibilidad de los glóbulos rojos y tiene efectos broncodilatadores. Se utiliza para mejorar el estado general y la vitalidad en perros geriátricos.", "recommendations": "Administrar con el estómago vacío.", "precautions": "Puede causar nerviosismo o malestar gastrointestinal.", "contraindications": "No usar en hembras gestantes o reproductoras.", "interactions": { "summary": "Puede potenciar los efectos de la teofilina y los antihipertensivos.", "specifics": [] }, "substitutes": ["Pentoxifilina"] },
  { "name": "Prostaglandina E2", "commercial_names": ["PGE2, Dinoprostona, Prepidil®"], "concentration": { "Gel": "0.5 mg/3 g" }, "doses": { "Perros": [{ "purpose": "Relajación y dilatación cervical", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 2, "unit": "mg/perra", "route": "Tópica (intravaginal)", "frequency": "Dosis única" }] }, "functions": "Prostaglandina que se utiliza para la 'maduración' del cérvix antes de la inducción del parto.", "recommendations": "Aplicar directamente en el canal cervical. Usar guantes.", "precautions": "Puede causar vómitos. No usar si se sospecha de distocia obstructiva.", "contraindications": "Distocia obstructiva.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Oxitocina"] },
  { "name": "Quinocrina", "commercial_names": ["Atabrine®"], "concentration": { "Tabletas": "100 mg" }, "doses": { "Perros": [{ "purpose": "Tratamiento de Giardiasis refractaria", "dose_range_min": 6, "dose_range_rec": 6.6, "dose_range_max": 7, "unit": "mg/kg", "route": "PO", "frequency": "c/12h por 5 días" }] }, "functions": "Antiprotozoario y antihelmíntico. Se utiliza para el tratamiento de la giardiasis que no responde a los fármacos de primera línea.", "recommendations": "A menudo se usa en combinación con metronidazol.", "precautions": "Puede causar vómitos, fiebre y letargo. Puede teñir la piel y la orina de amarillo.", "contraindications": "Enfermedad hepática severa.", "interactions": { "summary": "No se han reportado interacciones significativas.", "specifics": [] }, "substitutes": ["Metronidazol", "Fenbendazol", "Tinidazol"] },
  { "name": "Remifentanilo", "commercial_names": ["Ultiva®"], "concentration": { "Polvo para reconstituir": "1 mg" }, "doses": { "Perros": [{ "purpose": "Analgésico/adyuvante anestésico intraoperatorio", "dose_range_min": 0.1, "dose_range_rec": 0.25, "dose_range_max": 0.5, "unit": "mcg/kg/min", "route": "Infusión IV continua" }], "Gatos": [{ "purpose": "Analgésico/adyuvante anestésico", "dose_range_min": 0.1, "dose_range_rec": 0.2, "dose_range_max": 0.3, "unit": "mcg/kg/min", "route": "Infusión IV continua" }] }, "functions": "Analgésico opioide sintético agonista puro (mu) de acción ultracorta. Se metaboliza rápidamente por esterasas plasmáticas, independientemente de la función hepática o renal.", "recommendations": "Ideal para proporcionar analgesia intraoperatoria intensa y titulable. Su efecto cesa a los pocos minutos de suspender la infusión. Requiere bomba de infusión.", "precautions": "Causa depresión respiratoria y bradicardia dosis-dependiente. No proporciona analgesia postoperatoria una vez suspendido.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "Efectos sedantes aditivos con otros depresores del SNC.", "specifics": [] }, "substitutes": ["Fentanilo", "Alfentanilo"] },
  { "name": "Rivaroxaban", "commercial_names": ["Xarelto®"], "concentration": { "Tabletas": "10 mg" }, "doses": { "Perros": [{ "purpose": "Anticoagulante oral", "dose_range_min": 0.5, "dose_range_rec": 1, "dose_range_max": 2, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }], "Gatos": [{ "purpose": "Prevención de tromboembolismo aórtico (ATE)", "dose_range_min": 2.5, "dose_range_rec": 2.5, "dose_range_max": 5, "unit": "mg/gato", "route": "PO", "frequency": "c/24h" }] }, "functions": "Anticoagulante oral que inhibe directamente el Factor Xa. Se utiliza para la prevención y el tratamiento de trombosis.", "recommendations": "Alternativa oral a las heparinas de bajo peso molecular. No requiere el monitoreo de coagulación de rutina que necesita la warfarina.", "precautions": "El principal efecto adverso es la hemorragia. No existe un antídoto específico.", "contraindications": "Hemorragia activa, enfermedad hepática o renal severa.", "interactions": { "summary": "Aumenta el riesgo de sangrado con otros fármacos que afectan la hemostasia.", "specifics": [] }, "substitutes": ["Clopidogrel", "Dalteparina", "Enoxaparina"] },
  { "name": "Robenacoxib", "commercial_names": ["Onsior®"], "concentration": { "Tabletas": "6 mg", "Solución Inyectable": "20 mg/mL" }, "doses": { "Perros": [{ "purpose": "Dolor y inflamación (osteoartritis, postoperatorio)", "dose_range_min": 1, "dose_range_rec": 1.5, "dose_range_max": 2, "unit": "mg/kg", "route": "PO, SC", "frequency": "c/24h" }], "Gatos": [{ "purpose": "Dolor postoperatorio", "dose_range_min": 1, "dose_range_rec": 1.5, "dose_range_max": 2, "unit": "mg/kg", "route": "PO, SC", "frequency": "c/24h (por un máximo de 3 días)" }] }, "functions": "Antiinflamatorio no esteroideo (AINE) altamente selectivo para la inhibición de la COX-2.", "recommendations": "Aprobado para uso a corto plazo en gatos, lo que lo convierte en una opción más segura que otros AINEs en esta especie. Administrar con el estómago vacío o con una pequeña cantidad de comida.", "precautions": "Puede causar toxicidad gastrointestinal y renal. No usar por más del tiempo aprobado, especialmente en gatos.", "contraindications": "Enfermedad GI, renal o hepática preexistente. No usar con otros AINEs o corticosteroides.", "interactions": { "summary": "Aumenta el riesgo de toxicidad con otros AINEs o corticosteroides.", "specifics": [] }, "substitutes": ["Meloxicam", "Firocoxib", "Carprofeno"] },
  { "name": "Sevoflurano", "commercial_names": ["Sevoflo®"], "concentration": { "Líquido para inhalación": "100%" }, "doses": { "Todas las especies": [{ "purpose": "Anestésico general inhalatorio", "dose_range_min": 2, "dose_range_rec": 3, "dose_range_max": 4, "unit": "% para inducción; 1.5-2.5% para mantenimiento", "route": "Inhalatoria" }] }, "functions": "Anestésico general inhalatorio. Es uno de los agentes de elección para la inducción y el mantenimiento de la anestesia debido a su rápido inicio de acción y rápida recuperación.", "recommendations": "Requiere un vaporizador calibrado específico para sevoflurano. Proporciona poca analgesia, por lo que debe usarse con analgésicos apropiados.", "precautions": "Causa depresión cardiovascular (hipotensión) y respiratoria dosis-dependiente. Puede reaccionar con el absorbente de CO2 seco para formar Compuesto A, que es nefrotóxico.", "contraindications": "Historial de hipertermia maligna.", "interactions": { "summary": "Potencia los efectos de los bloqueadores neuromusculares.", "specifics": [] }, "substitutes": ["Isoflurano (recuperación más lenta)", "Desflurano"] },
  { "name": "Silibina", "commercial_names": ["Denamarin® (combinado con SAMe)"], "concentration": { "Tabletas": "Variable" }, "doses": { "Perros": [{ "purpose": "Hepatoprotector", "dose_range_min": 20, "dose_range_rec": 30, "dose_range_max": 50, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }], "Gatos": [{ "purpose": "Hepatoprotector", "dose_range_min": 20, "dose_range_rec": 30, "dose_range_max": 50, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }] }, "functions": "Componente activo principal de la silimarina (cardo mariano). Tiene propiedades antioxidantes y hepatoprotectoras.", "recommendations": "A menudo se encuentra en formulaciones complejas con fosfatidilcolina para mejorar su absorción. Se utiliza como adyuvante en el tratamiento de enfermedades hepáticas.", "precautions": "Extremadamente seguro.", "contraindications": "Obstrucción biliar.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["S-Adenosilmetionina (SAMe)", "Vitamina E"] },
  { "name": "Sulfacetamida Sódica", "commercial_names": ["Bleph-10®"], "concentration": { "Solución Oftálmica": "10%" }, "doses": { "Perros": [{ "purpose": "Tratamiento de conjuntivitis bacteriana", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 1, "unit": "gota/ojo", "route": "Tópica oftálmica", "frequency": "c/4-8h" }] }, "functions": "Antibiótico sulfonamida bacteriostático para uso oftálmico.", "recommendations": "Su uso ha disminuido en favor de antibióticos oftálmicos más modernos y de espectro más amplio.", "precautions": "Puede causar reacciones de hipersensibilidad en animales alérgicos a las sulfas.", "contraindications": "Hipersensibilidad a las sulfonamidas.", "interactions": { "summary": "No se han reportado interacciones.", "specifics": [] }, "substitutes": ["Cloranfenicol (oftálmico)", "Tobramicina (oftálmica)"] },
  { "name": "Tadalafilo", "commercial_names": ["Cialis®"], "concentration": { "Tabletas": "5 mg" }, "doses": { "Perros": [{ "purpose": "Tratamiento de la hipertensión pulmonar", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 2, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }] }, "functions": "Inhibidor de la fosfodiesterasa tipo 5 (PDE5) de acción prolongada. Similar al sildenafil, causa vasodilatación de la arteria pulmonar.", "recommendations": "Alternativa al sildenafil con la ventaja de una dosificación de una vez al día.", "precautions": "Puede causar hipotensión sistémica.", "contraindications": "No usar en pacientes que reciben nitratos.", "interactions": { "summary": "Potencia el efecto hipotensor de los nitratos.", "specifics": [] }, "substitutes": ["Sildenafil"] },
  { "name": "Telmisartán", "commercial_names": ["Semintra® (solución oral), Micardis®"], "concentration": { "Solución Oral": "4 mg/mL", "Tabletas": "40 mg" }, "doses": { "Perros": [{ "purpose": "Tratamiento de la proteinuria", "dose_range_min": 1, "dose_range_rec": 1, "dose_range_max": 2, "unit": "mg/kg", "route": "PO", "frequency": "c/24h" }], "Gatos": [{ "purpose": "Tratamiento de la hipertensión sistémica", "dose_range_min": 1, "dose_range_rec": 2, "dose_range_max": 3, "unit": "mg/kg", "route": "PO", "frequency": "c/12-24h" }] }, "functions": "Antagonista del receptor de la angiotensina II (ARA). Bloquea los efectos de la angiotensina II, causando vasodilatación y reduciendo la proteinuria. No causa la tos asociada a los IECAs.", "recommendations": "Es el tratamiento de elección para la hipertensión en gatos y una alternativa a los IECAs para la proteinuria en perros.", "precautions": "Puede causar hipotensión y azotemia, especialmente en pacientes deshidratados.", "contraindications": "Gestación, hipotensión severa.", "interactions": { "summary": "Aumenta el riesgo de hipercalemia con diuréticos ahorradores de potasio. Aumenta el riesgo de daño renal con AINEs.", "specifics": [] }, "substitutes": ["Amlodipino (en gatos)", "Benazepril", "Enalapril"] },
  { "name": "Tetracosactida", "commercial_names": ["Synacthen®"], "concentration": { "Solución Inyectable": "0.25 mg/mL" }, "doses": { "Perros": [{ "purpose": "Prueba de estimulación para diagnóstico de hipo/hiperadrenocorticismo", "dose_range_min": 5, "dose_range_rec": 5, "dose_range_max": 5, "unit": "mcg/kg", "route": "IV, IM" }], "Gatos": [{ "purpose": "Prueba de estimulación de ACTH", "dose_range_min": 125, "dose_range_rec": 125, "dose_range_max": 125, "unit": "mcg/gato", "route": "IV, IM" }] }, "functions": "Análogo sintético de la ACTH, idéntico a la cosintropina. Se utiliza para evaluar la función de la glándula adrenal.", "recommendations": "Alternativa a la cosintropina para la prueba de estimulación con ACTH.", "precautions": "Generalmente muy seguro.", "contraindications": "Ninguna significativa.", "interactions": { "summary": "Resultados alterados si el paciente está recibiendo corticosteroides.", "specifics": [] }, "substitutes": ["Cosintropina"] },
  { "name": "Tiamulina", "commercial_names": ["Denagard®"], "concentration": { "Premezcla medicada": "10%" }, "doses": { "Porcinos": [{ "purpose": "Tratamiento de la disentería porcina, neumonía enzoótica", "dose_range_min": 5, "dose_range_rec": 10, "dose_range_max": 15, "unit": "mg/kg", "route": "PO (en alimento o agua)" }] }, "functions": "Antibiótico pleuromutilina. Activo contra espiroquetas (Brachyspira) y Mycoplasma.", "recommendations": "Se utiliza principalmente en la producción porcina y avícola.", "precautions": "NO USAR CON IONÓFOROS (monensina, salinomicina), la combinación es a menudo fatal.", "contraindications": "Uso concomitante con ionóforos.", "interactions": { "summary": "Interacción fatal con ionóforos.", "specifics": [] }, "substitutes": ["Tilosina", "Lincomicina"] },
  { "name": "Tiletamina", "commercial_names": ["Telazol® (combinado con Zolazepam)"], "concentration": { "Polvo para reconstituir": "50 mg/mL" }, "doses": { "Perros": [{ "purpose": "Anestésico disociativo", "dose_range_min": 3, "dose_range_rec": 6, "dose_range_max": 10, "unit": "mg/kg (de la combinación)", "route": "IM, IV" }], "Gatos": [{ "purpose": "Anestésico disociativo", "dose_range_min": 3, "dose_range_rec": 8, "dose_range_max": 15, "unit": "mg/kg (de la combinación)", "route": "IM, IV" }] }, "functions": "Anestésico disociativo, similar a la ketamina. Se utiliza en combinación con la benzodiazepina zolazepam.", "recommendations": "Siempre se encuentra en una combinación 1:1 con zolazepam. En perros, la recuperación puede ser disfórica.", "precautions": "Mantiene los reflejos y los ojos abiertos (requiere lubricación). Causa depresión respiratoria.", "contraindications": "Enfermedad pancreática, insuficiencia renal severa.", "interactions": { "summary": "Potencia el efecto de otros anestésicos.", "specifics": [] }, "substitutes": ["Ketamina"] },
  { "name": "Trientina", "commercial_names": ["Syprine®"], "concentration": { "Cápsulas": "250 mg" }, "doses": { "Perros": [{ "purpose": "Quelante de cobre (enfermedad por almacenamiento de cobre)", "dose_range_min": 10, "dose_range_rec": 15, "dose_range_max": 20, "unit": "mg/kg", "route": "PO", "frequency": "c/12h" }] }, "functions": "Agente quelante de cobre. Se utiliza como alternativa a la penicilamina en perros que no la toleran.", "recommendations": "Administrar con el estómago vacío.", "precautions": "Generalmente mejor tolerado que la penicilamina. Puede causar anemia por deficiencia de hierro.", "contraindications": "Hipersensibilidad.", "interactions": { "summary": "No administrar con suplementos de hierro.", "specifics": [] }, "substitutes": ["Penicilamina"] },
  { "name": "Valnemulina", "commercial_names": ["Econor®"], "concentration": { "Premezcla medicada": "10%" }, "doses": { "Porcinos": [{ "purpose": "Tratamiento de la disentería porcina, neumonía enzoótica", "dose_range_min": 3, "dose_range_rec": 6, "dose_range_max": 12, "unit": "mg/kg", "route": "PO (en alimento)" }] }, "functions": "Antibiótico pleuromutilina, similar a la tiamulina.", "recommendations": "Alternativa a la tiamulina en la producción porcina.", "precautions": "NO USAR CON IONÓFOROS (monensina, salinomicina), la combinación es a menudo fatal.", "contraindications": "Uso concomitante con ionóforos.", "interactions": { "summary": "Interacción fatal con ionóforos.", "specifics": [] }, "substitutes": ["Tiamulina", "Tilosina"] },
  { "name": "Zolazepam", "commercial_names": ["Telazol® (combinado con Tiletamina)"], "concentration": { "Polvo para reconstituir": "50 mg/mL" }, "doses": { "Perros": [{ "purpose": "Sedante, relajante muscular", "dose_range_min": 3, "dose_range_rec": 6, "dose_range_max": 10, "unit": "mg/kg (de la combinación)", "route": "IM, IV" }], "Gatos": [{ "purpose": "Sedante, relajante muscular", "dose_range_min": 3, "dose_range_rec": 8, "dose_range_max": 15, "unit": "mg/kg (de la combinación)", "route": "IM, IV" }] }, "functions": "Benzodiazepina de acción prolongada. Se utiliza en combinación con el anestésico disociativo tiletamina para proporcionar sedación, relajación muscular y anestesia.", "recommendations": "Siempre se encuentra en una combinación 1:1 con tiletamina. En perros, la duración del zolazepam es mayor que la de la tiletamina, lo que puede resultar en recuperaciones disfóricas.", "precautions": "Puede causar depresión respiratoria.", "contraindications": "Enfermedad pancreática, insuficiencia renal severa.", "interactions": { "summary": "Potencia el efecto de otros depresores del SNC.", "specifics": [] }, "substitutes": ["Diazepam", "Midazolam"] }
].sort((a, b) => a.name.localeCompare(b.name));

        // --- NEW DATA STRUCTURES ---
        const physiologicalConstants = {
            'Perros': { 'Temp °C': '37.5-39.2', 'FC (lpm)': '60-140', 'FR (rpm)': '10-30', 'PAS (mmHg)': '90-140' },
            'Gatos': { 'Temp °C': '38.0-39.2', 'FC (lpm)': '140-220', 'FR (rpm)': '20-40', 'PAS (mmHg)': '80-130' },
            'Bovinos': { 'Temp °C': '38.0-39.5', 'FC (lpm)': '40-80', 'FR (rpm)': '10-30', 'PAS (mmHg)': '100-140' },
            'Equinos': { 'Temp °C': '37.5-38.5', 'FC (lpm)': '28-44', 'FR (rpm)': '8-16', 'PAS (mmHg)': '90-130' },
            'Ovinos': { 'Temp °C': '38.5-40.0', 'FC (lpm)': '70-90', 'FR (rpm)': '12-25', 'PAS (mmHg)': '90-130' },
            'Caprinos': { 'Temp °C': '38.5-40.5', 'FC (lpm)': '70-90', 'FR (rpm)': '15-30', 'PAS (mmHg)': '90-130' },
            'Porcinos': { 'Temp °C': '38.0-39.5', 'FC (lpm)': '70-120', 'FR (rpm)': '30-45', 'PAS (mmHg)': '100-150' },
            'Conejos': { 'Temp °C': '38.5-40.0', 'FC (lpm)': '180-350', 'FR (rpm)': '30-60', 'PAS (mmHg)': '90-130' },
            'Hurones': { 'Temp °C': '37.8-39.4', 'FC (lpm)': '180-250', 'FR (rpm)': '33-36', 'PAS (mmHg)': '120-160' },
            'Cobayos': { 'Temp °C': '37.2-39.5', 'FC (lpm)': '230-380', 'FR (rpm)': '45-110', 'PAS (mmHg)': '90-120' },
            'Psitácidas (promedio)': { 'Temp °C': '40.0-42.0', 'FC (lpm)': '250-600', 'FR (rpm)': '25-50', 'PAS (mmHg)': 'N/A' },
            'Iguanas': { 'Temp °C': '28.0-35.0 (gradiente)', 'FC (lpm)': '40-60', 'FR (rpm)': '10-20', 'PAS (mmHg)': 'N/A' },
        };

        const anestheticProtocols = [
            // --- PERROS ---
            { name: 'Perro Sano (ASA I/II) - Reversible', species: 'Perros', asa: 'I-II', premed: 'Dexmedetomidina (2-5 mcg/kg) + Butorfanol (0.2-0.4 mg/kg) IM.', induction: 'Propofol (2-4 mg/kg) o Alfaxalona (1-2 mg/kg) IV a efecto.', maintenance: 'Isoflurano / Sevoflurano.', notes: 'Buena sedación y analgesia, totalmente reversible con Atipamezol. Ideal para procedimientos de rutina.' },
            { name: 'Perro Sano (ASA I/II) - Opción Clásica', species: 'Perros', asa: 'I-II', premed: 'Acepromacina (0.02-0.05 mg/kg) + Buprenorfina (0.01-0.02 mg/kg) IM.', induction: 'Propofol (3-5 mg/kg) IV a efecto.', maintenance: 'Isoflurano.', notes: 'Buena sedación, pero no es reversible y puede causar hipotensión. Requiere buen monitoreo.' },
            { name: 'Perro Geriátrico/Débil (ASA III/IV)', species: 'Perros', asa: 'III-IV', premed: 'Midazolam (0.2-0.3 mg/kg) + Fentanilo (2-5 mcg/kg) IV lento.', induction: 'Etomidato (1-2 mg/kg) o Alfaxalona (1-2 mg/kg) IV. Alternativa: Propofol a dosis reducida (1-2 mg/kg) co-inducido con Midazolam.', maintenance: 'Isoflurano / Sevoflurano a la CAM más baja posible.', notes: 'Protocolo enfocado en la máxima estabilidad cardiovascular.' },
            { name: 'Perro para Cesárea', species: 'Perros', asa: 'II-III', premed: 'Bajo o nulo. Considerar opioide de acción corta (Fentanilo 2 mcg/kg IV) justo antes de la inducción.', induction: 'Propofol (3-6 mg/kg) o Alfaxalona (2-3 mg/kg) IV a efecto (rápido para minimizar depresión fetal).', maintenance: 'Isoflurano. Anestesia epidural es la mejor opción para la analgesia.', notes: 'El objetivo es minimizar la depresión de los cachorros. Tener equipo de reanimación neonatal (Naloxona, Doxapram) listo.' },
            { name: 'Perro Braquicéfalo', species: 'Perros', asa: 'II-III', premed: 'Maropitant (1 mg/kg) SC 1h antes. Butorfanol (0.2 mg/kg) + Midazolam (0.2 mg/kg) IM.', induction: 'Inducción rápida con Propofol (3-5 mg/kg) IV y asegurar vía aérea inmediatamente (intubación).', maintenance: 'Isoflurano / Sevoflurano.', notes: 'Pre-oxigenar por 5 minutos es crucial. Mantener intubado el mayor tiempo posible durante la recuperación.' },
            
            // --- GATOS ---
            { name: 'Gato Sano (ASA I/II) - "Kitty Magic" Mejorado', species: 'Gatos', asa: 'I-II', premed: 'Dexmedetomidina (5-10 mcg/kg) + Ketamina (3-5 mg/kg) + Buprenorfina (0.02 mg/kg) IM, todo en la misma jeringa.', induction: 'Puede no ser necesaria, o complementar com Propofol/Alfaxalona IV a efecto.', maintenance: 'Isoflurano / Sevoflurano.', notes: 'Excelente inmovilización y analgesia. Reversible (Atipamezol revierte Dexmedetomidina).' },
            { name: 'Gato Obstruido/Urgencia (ASA IV)', species: 'Gatos', asa: 'IV', premed: 'Butorfanol (0.2-0.4 mg/kg) + Midazolam (0.2 mg/kg) IM. Evitar α2-agonistas y Ketamina.', induction: 'Propofol (dosis bajas, 2-4 mg/kg) o Alfaxalona (1-2 mg/kg) IV. Anestesia epidural es altamente recomendada.', maintenance: 'Sevoflurano (rápida eliminación).', notes: 'Enfoque en estabilización primero. Corregir hiperkalemia y deshidratación antes de anestesiar.' },
            { name: 'Gato Agresivo para Sedación', species: 'Gatos', asa: 'I-II', premed: 'Gabapentina oral (100 mg/gato) 2-3 horas antes de la cita. En clínica: Tiletamina/Zolazepam (Zoletil®) (2-4 mg/kg) IM.', induction: 'N/A para sedación.', maintenance: 'N/A', notes: 'Zoletil proporciona una sedación profunda y rápida. La premedicación oral reduce el estrés.' },

            // --- GRANDES ESPECIES ---
            { name: 'Equino - Sedación de Campo', species: 'Equinos', asa: 'I-III', premed: 'Xilacina (0.5-1.1 mg/kg) IV o Detomidina (10-20 mcg/kg) IV. Esperar efecto máximo.', induction: 'Ketamina (2.2 mg/kg) + Diazepam o Midazolam (0.05-0.1 mg/kg) IV.', maintenance: 'Infusión de "Triple Gota": Guaifenesina 5% (50mg/mL) + Ketamina (2mg/mL) + Xilacina (0.5mg/mL) IV a ritmo de 1-2 mL/kg/hr.', notes: 'Protocolo de TIVA (Anestesia Total Intravenosa) muy común en campo para procedimientos de hasta 60 minutos.' },
            { name: 'Bovino - Sedación y Anestesia Local', species: 'Bovinos', asa: 'I-III', premed: 'Xilacina (0.05-0.1 mg/kg) IM. ¡Los bovinos son muy sensibles!', induction: 'Anestesia local infiltrativa o bloqueo regional (ej. Bloqueo paravertebral) con Lidocaína al 2%.', maintenance: 'N/A', notes: 'Para muchos procedimientos de campo (cirugía de flanco, etc.), la sedación profunda com anestesia local es suficiente y más segura que la anestesia general.' },
        ];
        const SEDATIVE_ANESTHETIC_DRUGS = [
            "Ketanil® (Ketamina 200 mg/mL)",
            "Ketovet (Ketamina)",
            "Kronamina Vet® (Dexmedetomidina)",
            "Xilacina al 10% (Clorhidrato de Xilacina)",
            "Zoletil 100 (Tiletamina + Zolazepam)"
        ];
        
        // --- Reusable Info Card Component (GLOBAL SCOPE) ---
        const InfoCard = ({ icon, title, color, children }) => {
            if (!children || (Array.isArray(children) && children.length === 0)) return null;
            const colorClasses = {
                red: 'border-red-500/50 bg-red-500/10 text-red-300',
                yellow: 'border-yellow-500/50 bg-yellow-500/10 text-yellow-300',
                blue: 'border-blue-500/50 bg-blue-500/10 text-blue-300',
                green: 'border-green-500/50 bg-green-500/10 text-green-300',
                purple: 'border-purple-500/50 bg-purple-500/10 text-purple-300',
                indigo: 'border-indigo-500/50 bg-indigo-500/10 text-indigo-300',
            };

            return (
                <div className={`p-3 rounded-lg border ${colorClasses[color]}`}>
                    <div className="flex items-center mb-1">
                        {icon}
                        <h3 className={`ml-2 font-bold text-xs uppercase tracking-wider text-${color}-400`}>{title}</h3>
                    </div>
                    <div className="text-gray-300 text-xs pl-6 prose prose-sm" dangerouslySetInnerHTML={{ __html: String(children).replace(/\n/g, '<br/>') }} />
                </div>
            );
        };
        
        // --- Reusable Medication Info Display (GLOBAL SCOPE) ---
        const MedicationInfo = ({ medData }) => {
            if(!medData) return null;
            const interactions = medData.interactions?.summary + (medData.interactions?.specifics?.map(i => `<br/>- ${i.drug}: ${i.effect}`).join('') || '');
             return(
                  <div className="pt-4 border-t border-slate-700">
                     <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm">
                         <InfoCard icon={<Zap size={16} className="text-green-400"/>} title="Función" color="green">{medData.functions}</InfoCard>
                         <InfoCard icon={<Lightbulb size={16} className="text-blue-400"/>} title="Recomendaciones" color="blue">{medData.recommendations}</InfoCard>
                         <InfoCard icon={<AlertTriangle size={16} className="text-yellow-400"/>} title="Precauciones" color="yellow">{medData.precautions}</InfoCard>
                         <InfoCard icon={<Slash size={16} className="text-red-400"/>} title="Contraindicaciones" color="red">{medData.contraindications}</InfoCard>
                         <InfoCard icon={<Users size={16} className="text-purple-400"/>} title="Interacciones" color="purple">{interactions}</InfoCard>
                         <InfoCard icon={<Shuffle size={16} className="text-indigo-400"/>} title="Sustitutos" color="indigo">{medData.substitutes?.join(', ')}</InfoCard>
                     </div>
                 </div>
             );
        }
        
        // --- HELPER & TOOL COMPONENTS ---
        const InfoTooltip = ({ text }) => (
            <div className="tooltip ml-1">
                <HelpCircle size={14} className="text-gray-400" />
                <span className="tooltiptext">{text}</span>
            </div>
        );

        const HistoryModal = ({ history, onClose, onRestore }) => {
            return (
                <div className="fixed inset-0 bg-slate-900 bg-opacity-75 z-50 flex justify-center items-center p-4">
                    <div className="bg-slate-800 rounded-lg shadow-xl w-full max-w-2xl p-6 h-[90vh] flex flex-col">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-2xl font-bold text-white">Historial de Dosis (Últimas 10)</h2>
                            <button onClick={onClose} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                        </div>
                        <ul className="space-y-3 overflow-y-auto flex-grow pr-2">
                            {history.length > 0 ? history.map(entry => (
                                <li key={entry.id} className="bg-slate-700/50 p-3 rounded-lg">
                                    <div className="flex justify-between items-center">
                                        <div>
                                            <p className="font-bold text-white">{entry.patient.name} <span className="text-sm font-normal text-gray-400">({entry.patient.species}{entry.patient.subSpecies ? `/${entry.patient.subSpecies}`:''}, {entry.patient.weight}kg)</span></p>
                                            <p className="text-xs text-gray-300 mt-1 truncate">{entry.medications.map(med => med.name.split('(')[0].trim()).join(', ')}</p>
                                            <p className="text-xs text-gray-400">{entry.timestamp}</p>
                                        </div>
                                        <button onClick={() => onRestore(entry)} className="p-2 text-blue-400 hover:text-white" title="Restaurar datos"><PlusCircle size={20}/></button>
                                    </div>
                                </li>
                            )) : <p className="text-center text-gray-400">No hay dosis guardadas.</p>}
                        </ul>
                    </div>
                </div>
            )
        };

        const InfoModal = ({ title, onClose, children }) => {
            return (
                <div className="fixed inset-0 bg-slate-900 bg-opacity-75 z-[100] flex justify-center items-center p-4">
                    <div className="bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 relative h-[90vh] overflow-y-auto">
                        <div className="flex justify-between items-center mb-4 sticky top-0 bg-slate-800 py-2">
                            <h2 className="text-2xl font-bold text-white">{title}</h2>
                            <button onClick={onClose} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                        </div>
                        <div className="prose prose-invert max-w-none text-gray-300">
                           {children}
                        </div>
                    </div>
                </div>
            );
        };
        
        const EmergencyMode = ({ onExit }) => {
            const emergencyDrugs = [
                { name: 'Adrenalina (1 mg/mL)', dose: 0.01, unit: 'mg/kg', resultUnit: 'mL/kg', calculation: (w,d) => (w*d)/1, info: 'Para PCR o shock anafiláctico. Diluir 1:10 para uso IV (0.1 mg/mL).' },
                { name: 'Atropina (0.5 mg/mL)', dose: 0.02, unit: 'mg/kg', resultUnit: 'mL/kg', calculation: (w,d) => (w*d)/0.5, info: 'Para bradicardia severa. Dosis en mL es 0.04 x peso en kg.' },
                { name: 'Diazepam (5 mg/mL)', dose: 0.5, unit: 'mg/kg', resultUnit: 'mL/kg', calculation: (w,d) => (w*d)/5, info: 'Para estado epiléptico. Administrar IV lenta.' },
                { name: 'Lidocaína 2% (20 mg/mL)', dose: 2, unit: 'mg/kg', resultUnit: 'mL/kg', calculation: (w,d) => (w*d)/20, info: 'Para arritmias ventriculares. Usar bolo de 2 mg/kg, seguido de CRI.' },
                { name: 'Dexametasona (2 mg/mL)', dose: 0.5, unit: 'mg/kg', resultUnit: 'mL/kg', calculation: (w,d) => (w*d)/2, info: 'Dosis de shock. Para trauma o anafilaxia.' },
                { name: 'Furosemida (50 mg/mL)', dose: 2, unit: 'mg/kg', resultUnit: 'mL/kg', calculation: (w,d) => (w*d)/50, info: 'Para edema pulmonar. Dosis de 2-4 mg/kg IV.' },
            ];
            const weightRanges = [[1, 5], [5, 10], [10, 20], [20, 40], [40, 60]];
            const [selectedDrug, setSelectedDrug] = React.useState(emergencyDrugs[0]);

            const calculateTable = (drug) => {
                return weightRanges.map(range => {
                    const avgWeight = (range[0] + range[1]) / 2;
                    const dose = drug.calculation(avgWeight, drug.dose);
                    return { range: `${range[0]}-${range[1]} kg`, dose: `${dose.toFixed(2)} mL` };
                });
            };
            
            return (
                <div className="fixed inset-0 bg-red-900 text-white p-4 font-sans flex flex-col items-center z-50 overflow-y-auto">
                    <h1 className="text-4xl font-bold mb-4 animate-pulse">MODO EMERGENCIA</h1>
                    <div className="w-full max-w-2xl bg-slate-800 p-6 rounded-lg">
                        <div className="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6">
                            {emergencyDrugs.map(drug => (
                                <button key={drug.name} onClick={() => setSelectedDrug(drug)} className={`p-3 rounded-lg transition-colors ${selectedDrug?.name === drug.name ? 'bg-yellow-500 text-black' : 'bg-red-700 hover:bg-red-600'}`}>
                                    {drug.name.split('(')[0]}
                                </button>
                            ))}
                        </div>
                        {selectedDrug && (
                            <div>
                                <h2 className="text-2xl font-bold mb-2 text-yellow-400">{selectedDrug.name}</h2>
                                <p className="mb-4 text-sm font-normal text-gray-300">{selectedDrug.info}</p>
                                <table className="w-full text-left">
                                    <thead><tr className="bg-slate-700"><th className="p-2">Rango de Peso</th><th className="p-2">Dosis a Administrar (Promedio)</th></tr></thead>
                                    <tbody>{calculateTable(selectedDrug).map(row => (<tr key={row.range} className="border-b border-slate-600"><td className="p-2">{row.range}</td><td className="p-2 font-bold">{row.dose}</td></tr>))}</tbody>
                                </table>
                            </div>
                        )}
                    </div>
                    <button onClick={onExit} className="mt-6 px-6 py-2 bg-slate-700 rounded-lg hover:bg-slate-600">Salir de Modo Emergencia</button>
                </div>
            );
        };
        
        const FluidTherapyCalculator = ({ onClose }) => {
             const [state, setState] = React.useState({ weight: '', dehydration: 5, maintenance: 60, losses: 0, dripFactor: 20 });
             const [showInfo, setShowInfo] = React.useState(false);

            const handleChange = e => {
                setState(prevState => ({ ...prevState, [e.target.name]: e.target.value }));
            };

            const { weight, dehydration, maintenance, losses, dripFactor } = state;
            const weightNum = parseFloat(weight) || 0;
            const dehydrationNum = parseFloat(dehydration) || 0;
            const maintenanceNum = parseFloat(maintenance) || 0;
            const lossesNum = parseFloat(losses) || 0;
            const dripFactorNum = parseFloat(dripFactor) || 0;

            const rehydrationMl = weightNum * dehydrationNum * 10;
            const maintenanceMl = weightNum * maintenanceNum;
            const totalMlDay = rehydrationMl + maintenanceMl + lossesNum;
            const rateMlHr = totalMlDay / 24;
            const rateGtsMin = (totalMlDay * dripFactorNum) / 1440; // 24 * 60
            
            return (
                <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-gray-700">
                    {showInfo && <InfoModal title="Información General de Fluidoterapia" onClose={() => setShowInfo(false)}>
                        <h3>¿Qué es?</h3>
                        <p>Es una de las terapias más importantes en medicina veterinaria, usada para corregir deshidratación, mantener la hidratación, reponer electrolitos y administrar medicamentos.</p>
                        <h3>¿Cuándo usarla?</h3>
                        <p>En pacientes deshidratados, en shock, anoréxicos, con vómitos/diarrea, durante y después de cirugías, o con enfermedades renales.</p>
                        <h3>Fórmulas Clave:</h3>
                        <ul>
                            <li><strong>Déficit (Rehidratación):</strong> <code>Peso (kg) * % Deshidratación * 10</code></li>
                            <li><strong>Mantenimiento:</strong> <code>Peso (kg) * Tasa (mL/kg/día)</code></li>
                              <li><strong>Total 24h:</strong> <code>Déficit + Mantenimiento + Pérdidas</code></li>
                        </ul>
                    </InfoModal>}
                    <div className="bg-slate-900 rounded-lg w-full p-6">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-2xl font-bold text-white">Calculadora de Fluidoterapia</h2>
                            <div className="flex items-center gap-2">
                               <button onClick={() => setShowInfo(true)} className="p-2 text-gray-400 hover:text-white"><HelpCircle size={24} /></button>
                               <button onClick={onClose} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                            </div>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label className="flex items-center text-sm font-bold text-gray-300 mb-1">Peso (kg) <InfoTooltip text="Peso actual del paciente en kilogramos." /></label>
                                <input type="number" name="weight" value={weight} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" />
                            </div>
                            <div>
                                <label className="flex items-center text-sm font-bold text-gray-300 mb-1">% Deshidratación <InfoTooltip text="Estimación clínica. 5% leve (mucosas pegajosas), 8% moderada (ojos hundidos), 10%+ severa (shock)." /></label>
                                <input type="number" name="dehydration" value={dehydration} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" />
                            </div>
                            <div>
                                <label className="flex items-center text-sm font-bold text-gray-300 mb-1">Mantenimiento (mL/kg/día) <InfoTooltip text="Tasa estándar para cubrir necesidades diarias. Común: 40-60 mL/kg/día." /></label>
                                <input type="number" name="maintenance" value={maintenance} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" />
                            </div>
                            <div>
                                <label className="flex items-center text-sm font-bold text-gray-300 mb-1">Pérdidas Anormales (mL/día) <InfoTooltip text="Estimar volumen perdido por vómito, diarrea, etc., en 24h." /></label>
                                <input type="number" name="losses" value={losses} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" />
                            </div>
                             <div>
                                <label className="flex items-center text-sm font-bold text-gray-300 mb-1">Factor Gotero (gts/mL) <InfoTooltip text="Factor de goteo del equipo de venoclisis (micro=60, macro=10, 15, o 20)." /></label>
                                <select name="dripFactor" value={dripFactor} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md">
                                    <option value="10">10 (Macrogoteo)</option>
                                    <option value="15">15 (Macrogoteo)</option>
                                    <option value="20">20 (Macrogoteo)</option>
                                    <option value="60">60 (Microgoteo)</option>
                                </select>
                            </div>
                        </div>
                         {weightNum > 0 && <div className="mt-6 p-4 bg-slate-800 rounded-lg">
                            <h3 className="text-lg font-bold text-green-400 mb-2">Resultados:</h3>
                            <p>Rehidratación: <strong>{rehydrationMl.toFixed(2)} mL</strong></p>
                            <p>Mantenimiento: <strong>{maintenanceMl.toFixed(2)} mL</strong></p>
                            <p>Pérdidas: <strong>{lossesNum.toFixed(2)} mL</strong></p>
                            <p className="mt-2 text-xl">Total 24h: <strong className="text-yellow-400">{totalMlDay.toFixed(2)} mL</strong></p>
                            <p className="mt-2 text-xl">Tasa de infusión: <strong className="text-yellow-400">{rateMlHr.toFixed(2)} mL/hr</strong></p>
                            <p className="mt-2 text-xl">Gotas: <strong className="text-yellow-400">{rateGtsMin.toFixed(2)} gts/min</strong> (~1 gota cada {rateGtsMin > 0 ? (60/rateGtsMin).toFixed(1) : 0} seg)</p>
                        </div>}
                    </div>
                </div>
            );
        };
        
        const BSACalculator = ({ onClose }) => {
            const [state, setState] = React.useState({ weight: '', species: 'Perros' });
            const [showInfo, setShowInfo] = React.useState(false);

            const handleChange = e => setState(prevState => ({...prevState, [e.target.name]: e.target.value}));

            const weightNum = parseFloat(state.weight) || 0;
            let bsa = 0;
            if(weightNum > 0){
                const k = state.species === 'Perros' ? 10.1 : 10.0;
                bsa = (k * Math.pow(weightNum * 1000, 2/3)) / 10000;
            }

            return (
                 <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-gray-700">
                     {showInfo && <InfoModal title="Superficie Corporal (BSA)" onClose={() => setShowInfo(false)}>
                        <h3>¿Qué es?</h3>
                        <p>La Superficie Corporal (BSA, por sus siglas en inglés) es una medida del área de superficie del cuerpo. Se utiliza para dosificar fármacos cuya eficacia y toxicidad se correlacionan mejor con el área metabólica que con el peso, como los agentes quimioterapéuticos.</p>
                        <h3>¿Cuándo usarla?</h3>
                        <p>Principalmente para calcular dosis de quimioterapia. Algunas dosis de otros fármacos también se expresan en mg/m².</p>
                        <h3>Fórmula:</h3>
                        <p><code>BSA (m²) = (K * Peso(g)^(2/3)) / 10,000</code></p>
                        <ul>
                            <li><strong>K (Constante):</strong> Varía por especie. Usualmente 10.1 para perros y 10.0 para gatos.</li>
                        </ul>
                    </InfoModal>}
                    <div className="bg-slate-900 rounded-lg w-full max-w-lg p-6">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-2xl font-bold text-white">Calculadora de Superficie Corporal</h2>
                             <div className="flex items-center gap-2">
                                <button onClick={() => setShowInfo(true)} className="p-2 text-gray-400 hover:text-white"><HelpCircle size={24} /></button>
                                <button onClick={onClose} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                            </div>
                        </div>
                         <div className="grid grid-cols-2 gap-4">
                            <div>
                               <label className="flex items-center text-sm font-bold text-gray-300 mb-1">Especie <InfoTooltip text="La constante 'K' en la fórmula varía ligeramente entre perros y gatos." /></label>
                               <select name="species" value={state.species} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md">
                                   <option value="Perros">Perro</option>
                                   <option value="Gatos">Gato</option>
                               </select>
                            </div>
                            <div>
                               <label className="flex items-center text-sm font-bold text-gray-300 mb-1">Peso (kg) <InfoTooltip text="Peso actual del paciente en kilogramos." /></label>
                               <input type="number" name="weight" value={state.weight} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" />
                            </div>
                        </div>
                        {weightNum > 0 && <div className="mt-6 p-4 bg-slate-800 rounded-lg text-center">
                            <h3 className="text-lg font-bold text-green-400">BSA Calculada:</h3>
                            <p className="text-3xl font-bold text-yellow-400">{bsa.toFixed(2)} m²</p>
                        </div>}
                    </div>
                </div>
            );
        };

        const CRICalculator = ({ onClose }) => {
             const [state, setState] = React.useState({ weight: '', dose: '', doseUnit: 'mcg/kg/min', concentration: '', fluidRate: '', fluidVolume: 1000 });
             const [showInfo, setShowInfo] = React.useState(false);

            const handleChange = e => setState(prevState => ({ ...prevState, [e.target.name]: e.target.value }));

            const weightNum = parseFloat(state.weight) || 0;
            const doseNum = parseFloat(state.dose) || 0;
            const concentrationNum = parseFloat(state.concentration) || 0;
            const fluidRateNum = parseFloat(state.fluidRate) || 0;
            const fluidVolumeNum = parseFloat(state.fluidVolume) || 0;
            
            let drugMlToAdd = 0;
            if(weightNum > 0 && doseNum > 0 && concentrationNum > 0 && fluidRateNum > 0){
                let doseInMgKgHr = doseNum;
                if(state.doseUnit === 'mcg/kg/min') doseInMgKgHr = (doseNum * 60) / 1000;
                if(state.doseUnit === 'mcg/kg/hr') doseInMgKgHr = doseNum / 1000;
                
                const hoursOfFluid = fluidVolumeNum / fluidRateNum;
                const totalDrugMg = doseInMgKgHr * weightNum * hoursOfFluid;
                drugMlToAdd = totalDrugMg / concentrationNum;
            }

            return (
                 <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-gray-700">
                      {showInfo && <InfoModal title="Infusión a Ritmo Constante (CRI)" onClose={() => setShowInfo(false)}>
                        <h3>¿Qué es?</h3>
                        <p>Una CRI administra un fármaco de forma continua en los fluidos intravenosos para mantener niveles sanguíneos constantes.</p>
                          <h3>¿Cuándo usarla?</h3>
                          <p>Es ideal para analgésicos (lidocaína, fentanilo, ketamina), anestésicos (propofol) o fármacos que requieren un efecto sostenido y controlado.</p>
                        <h3>Fórmula Clave:</h3>
                        <p><code>Volumen a añadir (mL) = (Dosis * Peso * Duración Bolsa) / Concentración Fármaco</code></p>
                        <p>La calculadora convierte todas las unidades para simplificar el proceso.</p>
                    </InfoModal>}
                    <div className="bg-slate-900 rounded-lg w-full max-w-2xl p-6">
                         <div className="flex justify-between items-center mb-4">
                            <h2 className="text-2xl font-bold text-white">Calculadora de CRI</h2>
                            <div className="flex items-center gap-2">
                                <button onClick={() => setShowInfo(true)} className="p-2 text-gray-400 hover:text-white"><HelpCircle size={24} /></button>
                                <button onClick={onClose} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                            </div>
                        </div>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                            <div><label className="flex items-center text-sm font-bold text-gray-300 mb-1">Peso (kg) <InfoTooltip text="Peso actual del paciente en kilogramos." /></label><input type="number" name="weight" value={state.weight} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" /></div>
                            <div>
                                <label className="flex items-center text-sm font-bold text-gray-300 mb-1">Dosis Fármaco <InfoTooltip text="La dosis deseada del fármaco en las unidades especificadas por hora o minuto." /></label>
                                <div className="flex">
                                    <input type="number" name="dose" value={state.dose} onChange={handleChange} className="w-2/3 p-2 bg-slate-800 rounded-l-md" />
                                    <select name="doseUnit" value={state.doseUnit} onChange={handleChange} className="w-1/3 p-2 bg-slate-600 rounded-r-md text-xs">
                                        <option value="mcg/kg/min">mcg/kg/min</option>
                                        <option value="mcg/kg/hr">mcg/kg/hr</option>
                                        <option value="mg/kg/hr">mg/kg/hr</option>
                                    </select>
                                </div>
                            </div>
                             <div><label className="flex items-center text-sm font-bold text-gray-300 mb-1">Conc. Fármaco (mg/mL) <InfoTooltip text="Concentración del fármaco en su vial original (ej. Lidocaína 2% = 20 mg/mL)." /></label><input type="number" name="concentration" value={state.concentration} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" /></div>
                             <div><label className="flex items-center text-sm font-bold text-gray-300 mb-1">Tasa Fluidos (mL/hr) <InfoTooltip text="La velocidad a la que se infundirán los fluidos al paciente (ej. 2x Mantenimiento)." /></label><input type="number" name="fluidRate" value={state.fluidRate} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" /></div>
                             <div><label className="flex items-center text-sm font-bold text-gray-300 mb-1">Volumen Bolsa (mL) <InfoTooltip text="Volumen total de la bolsa de fluidos a la que se añadirá el fármaco (ej. 100, 250, 500, 1000 mL)." /></label><input type="number" name="fluidVolume" value={state.fluidVolume} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" /></div>
                        </div>
                        {drugMlToAdd > 0 && <div className="mt-6 p-4 bg-slate-800 rounded-lg text-center">
                            <h3 className="text-lg font-bold text-green-400">Resultado:</h3>
                            <p className="text-xl">Añadir <strong className="text-yellow-400">{drugMlToAdd.toFixed(2)} mL</strong> de fármaco a la bolsa de <strong>{fluidVolumeNum} mL</strong>.</p>
                        </div>}
                    </div>
                </div>
            );
        };
        
        const DilutionCalculator = ({ onClose }) => {
            const [state, setState] = React.useState({ c1: '', v2: '', c2: '' });
            const [showInfo, setShowInfo] = React.useState(false);

            const handleChange = e => setState(prevState => ({ ...prevState, [e.target.name]: e.target.value }));
            
            const c1 = parseFloat(state.c1) || 0;
            const v2 = parseFloat(state.v2) || 0;
            const c2 = parseFloat(state.c2) || 0;
            
            let v1 = 0;
            if(c1 > 0 && v2 > 0 && c2 > 0){
                v1 = (c2 * v2) / c1;
            }

            return (
                <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-gray-700">
                    {showInfo && <InfoModal title="Diluciones (C1V1=C2V2)" onClose={() => setShowInfo(false)}>
                        <h3>¿Qué es?</h3>
                        <p>Esta calculadora utiliza la fórmula universal de dilución para determinar el volumen de una solución madre (V1) necesario para preparar una solución final de una concentración y volumen deseados.</p>
                        <h3>¿Cuándo usarla?</h3>
                        <p>Siempre que necesites preparar una solución menos concentrada a partir de una más concentrada. Ej: preparar una solución de Dexametasona al 0.5% a partir de un vial al 2%.</p>
                        <h3>Fórmula:</h3>
                        <p><code>V1 = (C2 * V2) / C1</code></p>
                         <p><strong>Importante:</strong> Las unidades de concentración (C1 y C2) deben ser las mismas (ej. mg/mL, %). Las unidades de volumen (V1 y V2) también serán las mismas.</p>
                    </InfoModal>}
                    <div className="bg-slate-900 rounded-lg w-full max-w-lg p-6">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-2xl font-bold text-white">Calculadora de Diluciones</h2>
                             <div className="flex items-center gap-2">
                                <button onClick={() => setShowInfo(true)} className="p-2 text-gray-400 hover:text-white"><HelpCircle size={24} /></button>
                                <button onClick={onClose} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                            </div>
                        </div>
                        <div className="grid grid-cols-1 gap-4">
                            <div><label className="flex items-center text-sm font-bold text-gray-300 mb-1">Concentración Inicial (C1) <InfoTooltip text="Concentración de la solución que tienes disponible (solución madre)." /></label><input type="number" name="c1" value={state.c1} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" placeholder="Ej: 50 (mg/mL o %)" /></div>
                            <div><label className="flex items-center text-sm font-bold text-gray-300 mb-1">Volumen Final Deseado (V2) <InfoTooltip text="Volumen total que necesitas preparar de la nueva solución." /></label><input type="number" name="v2" value={state.v2} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" placeholder="Ej: 100 (mL)" /></div>
                            <div><label className="flex items-center text-sm font-bold text-gray-300 mb-1">Concentración Final Deseada (C2) <InfoTooltip text="Concentración que quieres obtener en tu nueva solución." /></label><input type="number" name="c2" value={state.c2} onChange={handleChange} className="w-full p-2 bg-slate-800 rounded-md" placeholder="Ej: 5 (mg/mL o %)" /></div>
                        </div>
                        {v1 > 0 && <div className="mt-6 p-4 bg-slate-800 rounded-lg text-center">
                            <h3 className="text-lg font-bold text-green-400">Resultado (V1):</h3>
                            <p className="text-xl">Tome <strong className="text-yellow-400">{v1.toFixed(2)} mL</strong> de la solución inicial y aforar a <strong>{v2} mL</strong>.</p>
                        </div>}
                    </div>
                </div>
            );
        };
        
        const ToolsMenu = ({ onSelect }) => (
            <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-gray-700">
                <h2 className="text-xl font-bold mb-4 text-white text-center">Herramientas y Referencias</h2>
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onClick={() => onSelect('addMed')} className="flex flex-col items-center p-4 bg-teal-800/50 rounded-lg hover:bg-teal-700/50 transition-colors col-span-2 md:col-span-4"><FlaskConical className="mb-2 text-teal-400"/>Añadir Fármaco (IA)</button>
                    <button onClick={() => onSelect('vademecum')} className="flex flex-col items-center p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors"><BookOpen className="mb-2 text-blue-400"/>Vademécum</button>
                    <button onClick={() => onSelect('constants')} className="flex flex-col items-center p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors"><HeartPulse className="mb-2 text-red-400"/>Constantes</button>
                    <button onClick={() => onSelect('timer')} className="flex flex-col items-center p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors"><Clock className="mb-2 text-orange-400"/>Temporizador</button>
                    <button onClick={() => onSelect('fluid')} className="flex flex-col items-center p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors"><Droplet className="mb-2 text-cyan-400"/>Fluidoterapia</button>
                    <button onClick={() => onSelect('bsa')} className="flex flex-col items-center p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors"><Square className="mb-2 text-purple-400"/>Sup. Corporal</button>
                    <button onClick={() => onSelect('cri')} className="flex flex-col items-center p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors"><Calculator className="mb-2 text-green-400"/>CRI</button>
                    <button onClick={() => onSelect('dilution')} className="flex flex-col items-center p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors"><Beaker className="mb-2 text-indigo-400"/>Diluciones</button>
                    <button onClick={() => onSelect('protocols')} className="flex flex-col items-center p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors col-span-2"><Siren className="mb-2 text-yellow-400"/>Protocolos Anest.</button>
                </div>
            </div>
        );

        const VademecumView = ({ allMedications, favorites, toggleFavorite, onClose, handleUpdateUserMed }) => {
            const [searchTerm, setSearchTerm] = React.useState('');
            const [selectedMed, setSelectedMed] = React.useState(null);
            
            const filteredMeds = React.useMemo(() => {
                const allFiltered = allMedications.filter(m => searchTerm === '' || m.name.toLowerCase().includes(searchTerm.toLowerCase()) || m.commercial_names.join(' ').toLowerCase().includes(searchTerm.toLowerCase()));
                 return allFiltered.sort((a, b) => {
                    const aIsFav = favorites.includes(a.name);
                    const bIsFav = favorites.includes(b.name);
                    if (aIsFav && !bIsFav) return -1;
                    if (!aIsFav && bIsFav) return 1;
                    return a.name.localeCompare(b.name);
                });
            }, [searchTerm, favorites, allMedications]);

            if(selectedMed){
                 return (
                    <div className="bg-slate-900 p-4 md:p-6 rounded-3xl shadow-xl border border-gray-700">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-xl md:text-2xl font-bold text-white truncate">{selectedMed.name}</h2>
                            <button onClick={() => setSelectedMed(null)} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                        </div>
                        <div className="space-y-3 max-h-[70vh] overflow-y-auto pr-2">
                           <MedicationInfo medData={selectedMed} />
                        </div>
                    </div>
                );
            }

            return (
                 <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-gray-700">
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-2xl font-bold text-white">Vademécum de Consulta Rápida</h2>
                        <button onClick={onClose} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                    </div>
                    <input type="text" value={searchTerm} onChange={e => setSearchTerm(e.target.value)} placeholder="Buscar medicamento..." className="w-full px-3 py-2 mb-4 text-gray-200 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"/>
                    <ul className="space-y-2 max-h-[60vh] overflow-y-auto">
                        {filteredMeds.map(med => {
                             const isFav = favorites.includes(med.name);
                             return (
                                <li key={med.name} onClick={() => setSelectedMed(med)} className={`flex justify-between items-center p-3 rounded-lg cursor-pointer hover:bg-slate-700 ${isFav ? 'bg-slate-800/50 border border-yellow-500/50' : 'bg-slate-800'}`}>
                                    <span>{med.name}</span>
                                    <button onClick={(e) => { e.stopPropagation(); toggleFavorite(med.name); }} className={`p-1 rounded-full hover:bg-slate-600 ${isFav ? 'text-yellow-400' : 'text-gray-500'}`}>
                                        <Star size={18} fill={isFav ? 'currentColor' : 'none'}/>
                                    </button>
                                </li>
                            )
                        })}
                    </ul>
                 </div>
            );
        };

        const PhysiologicalConstantsView = ({ onClose }) => (
             <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-gray-700">
                <div className="flex justify-between items-center mb-4">
                    <h2 className="text-2xl font-bold text-white">Constantes Fisiológicas</h2>
                    <button onClick={onClose} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                </div>
                <div className="overflow-x-auto">
                    <table className="w-full text-left text-sm">
                        <thead className="bg-slate-800 text-gray-300">
                            <tr>
                                <th className="p-3">Especie</th>
                                <th className="p-3">Temp °C</th>
                                <th className="p-3">FC (lpm)</th>
                                <th className="p-3">FR (rpm)</th>
                                <th className="p-3">PAS (mmHg)</th>
                            </tr>
                        </thead>
                        <tbody>
                            {Object.entries(physiologicalConstants).map(([species, values]) => (
                                <tr key={species} className="border-b border-slate-700">
                                    <td className="p-3 font-bold">{species}</td>
                                    <td className="p-3">{values['Temp °C']}</td>
                                    <td className="p-3">{values['FC (lpm)']}</td>
                                    <td className="p-3">{values['FR (rpm)']}</td>
                                    <td className="p-3">{values['PAS (mmHg)']}</td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
             </div>
        );

        const AnestheticProtocolsView = ({ onClose }) => (
            <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-gray-700">
                <div className="flex justify-between items-center mb-4">
                    <h2 className="text-2xl font-bold text-white">Protocolos Anestésicos Sugeridos</h2>
                    <button onClick={onClose} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                </div>
                <div className="space-y-4 max-h-[70vh] overflow-y-auto">
                    {anestheticProtocols.map(proto => (
                        <div key={proto.name} className="bg-slate-800 p-4 rounded-lg">
                            <h3 className="font-bold text-lg text-blue-300">{proto.name}</h3>
                            <p className="text-sm text-gray-400 mb-2">Especie: {proto.species} | ASA: {proto.asa}</p>
                            <p><strong>Premedicación:</strong> {proto.premed}</p>
                            <p><strong>Inducción:</strong> {proto.induction}</p>
                            <p><strong>Mantenimiento:</strong> {proto.maintenance}</p>
                            <p className="text-xs text-gray-300 mt-2 bg-slate-700 p-2 rounded"><em>Nota: {proto.notes}</em></p>
                        </div>
                    ))}
                </div>
            </div>
        );
        
        const AddMedicationAI = ({ onSave, onClose }) => {
            const [step, setStep] = React.useState('input'); // input, loading, confirm
            const [userInput, setUserInput] = React.useState({ name: '', pharma: '', concentration: '', drug: ''});
            const [fetchedData, setFetchedData] = React.useState(null);

            const handleInputChange = (e) => {
                setUserInput({...userInput, [e.target.name]: e.target.value});
            };
            
            const handleSearch = () => {
                if(!userInput.name || !userInput.concentration || !userInput.drug){
                    alert("Por favor, introduce Nombre, Principio Activo y Concentración.");
                    return;
                }
                setStep('loading');
                // --- AI SIMULATION ---
                setTimeout(() => {
                    const newMedData = {
                        name: `${userInput.name} (${userInput.drug})`,
                        commercial_names: [userInput.name],
                        doses: {},
                        functions: "Información no encontrada por IA.",
                        recommendations: "Información no encontrada por IA.",
                        precautions: "Información no encontrada por IA.",
                        contraindications: "Información no encontrada por IA.",
                        interactions: {summary: "", specifics:[]},
                        substitutes: []
                    };
                    setFetchedData(newMedData);
                    setStep('confirm');
                }, 1500);
            };

            const handleSave = () => {
                onSave(fetchedData);
            }

            return (
                 <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-gray-700">
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-2xl font-bold text-white">Añadir Fármaco con IA (Simulado)</h2>
                        <button onClick={onClose} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                    </div>
                    
                    {step === 'input' && (
                        <div className="space-y-4">
                            <p className="text-sm text-gray-300">Introduce los datos del medicamento. La IA buscará la información técnica para rellenar los campos por ti.</p>
                            <div>
                                <label className="block text-sm font-bold text-gray-400 mb-1">Nombre Comercial</label>
                                <input type="text" name="name" value={userInput.name} onChange={handleInputChange} className="w-full p-2 bg-slate-800 rounded-md" />
                            </div>
                            <div>
                                <label className="block text-sm font-bold text-gray-400 mb-1">Principio Activo (Fármaco)</label>
                                <input type="text" name="drug" value={userInput.drug} onChange={handleInputChange} className="w-full p-2 bg-slate-800 rounded-md" />
                            </div>
                            <div>
                                <label className="block text-sm font-bold text-gray-400 mb-1">Farmacéutica (Opcional)</label>
                                <input type="text" name="pharma" value={userInput.pharma} onChange={handleInputChange} className="w-full p-2 bg-slate-800 rounded-md" />
                            </div>
                            <div>
                                <label className="block text-sm font-bold text-gray-400 mb-1">Concentración (ej. 50 mg/mL, 2%)</label>
                                <input type="text" name="concentration" value={userInput.concentration} onChange={handleInputChange} className="w-full p-2 bg-slate-800 rounded-md" />
                            </div>
                            <button onClick={handleSearch} className="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-bold">Buscar Información</button>
                        </div>
                    )}

                    {step === 'loading' && (
                         <div className="text-center p-8">
                            <p className="text-lg animate-pulse">Buscando en bases de datos...</p>
                        </div>
                    )}

                    {step === 'confirm' && fetchedData && (
                        <div className="space-y-4">
                            <h3 className="text-lg font-bold">Información Encontrada (Editable)</h3>
                            <div className="ai-response-container">
                                <pre>{JSON.stringify(fetchedData, null, 2)}</pre>
                            </div>
                            <div className="flex justify-between gap-4">
                                <button onClick={() => setStep('input')} className="w-full py-2 px-4 bg-gray-500 hover:bg-gray-600 rounded-lg text-white font-bold">Volver</button>
                                <button onClick={handleSave} className="w-full py-2 px-4 bg-green-600 hover:bg-green-700 rounded-lg text-white font-bold">Aceptar y Guardar</button>
                            </div>
                        </div>
                    )}
                 </div>
            );
        };
        
        const TimerTool = ({ onClose }) => {
            const [time, setTime] = React.useState(0);
            const [isActive, setIsActive] = React.useState(false);
            const [laps, setLaps] = React.useState([]);
            const countRef = React.useRef(null);

            const handleStart = () => {
                setIsActive(!isActive);
            };

            const handleReset = () => {
                setIsActive(false);
                clearInterval(countRef.current);
                setTime(0);
                setLaps([]);
            };

            const handleLap = () => {
                if (isActive) {
                    setLaps(prevLaps => [...prevLaps, time]);
                }
            };

            React.useEffect(() => {
                if (isActive) {
                    countRef.current = setInterval(() => {
                        setTime((prevTime) => prevTime + 1);
                    }, 1000);
                } else {
                    clearInterval(countRef.current);
                }
                return () => clearInterval(countRef.current);
            }, [isActive]);

            const formatTime = (timeInSeconds) => {
                const hours = Math.floor(timeInSeconds / 3600);
                const minutes = Math.floor((timeInSeconds % 3600) / 60);
                const seconds = timeInSeconds % 60;
                return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            };

            return (
                 <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-gray-700">
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-2xl font-bold text-white">Temporizador</h2>
                        <button onClick={onClose} className="p-2 text-gray-400 hover:text-white"><X size={24} /></button>
                    </div>
                    <div className="text-center">
                        <p className="text-6xl font-mono text-white mb-6">{formatTime(time)}</p>
                        <div className="flex justify-center gap-4 mb-6">
                            <button onClick={handleStart} className={`px-6 py-3 rounded-full font-bold text-lg ${isActive ? 'bg-yellow-500 text-black' : 'bg-green-600 text-white'}`}>{isActive ? 'Pausar' : 'Iniciar'}</button>
                            <button onClick={handleLap} className="px-6 py-3 rounded-full font-bold text-lg bg-blue-600 text-white disabled:opacity-50" disabled={!isActive}>Vuelta</button>
                            <button onClick={handleReset} className="px-6 py-3 rounded-full font-bold text-lg bg-red-600 text-white">Reiniciar</button>
                        </div>
                        <div className="max-h-48 overflow-y-auto space-y-2 text-left">
                            {laps.map((lap, index) => (
                                <div key={index} className="flex justify-between bg-slate-800 p-2 rounded">
                                    <span className="text-gray-400">Vuelta {index + 1}</span>
                                    <span className="font-mono text-white">{formatTime(lap)}</span>
                                </div>
                            )).reverse()}
                        </div>
                    </div>
                </div>
            );
        };
        
        // --- Main App Component ---
        const DosisApp = () => {
          // --- STATE MANAGEMENT ---
          const [activeView, setActiveView] = React.useState('calculator');
          const [patient, setPatient] = React.useState({ name: '', species: '', subSpecies: '', weight: '' });
          const [medications, setMedications] = React.useState([]);
          const [dosisHistory, setDosisHistory] = React.useState([]);
          const [showHistory, setShowHistory] = React.useState(false);
          const [speciesList, setSpeciesList] = React.useState([]);
          const [notification, setNotification] = React.useState(null);
          const [interactionWarning, setInteractionWarning] = React.useState(null);
          const [userAddedMeds, setUserAddedMeds] = React.useState(() => {
                try {
                    const saved = localStorage.getItem('dosisPerronasUserMeds');
                    return saved ? JSON.parse(saved) : [];
                } catch (e) {
                    return [];
                }
            });

            const allMedications = React.useMemo(() => {
                return [...initialMedications, ...userAddedMeds].sort((a, b) => a.name.localeCompare(b.name));
            }, [userAddedMeds]);

            React.useEffect(() => {
                localStorage.setItem('dosisPerronasUserMeds', JSON.stringify(userAddedMeds));
            }, [userAddedMeds]);
            
            const handleUpdateUserMed = (updatedMed) => {
                setUserAddedMeds(prevMeds => {
                    const isInitialMed = initialMedications.some(m => m.name === updatedMed.name);
                    const existingIndex = prevMeds.findIndex(med => med.name === updatedMed.name);
                    if (existingIndex > -1) {
                        const newMeds = [...prevMeds];
                        newMeds[existingIndex] = updatedMed;
                        return newMeds;
                    } else if (isInitialMed) {
                         return [...prevMeds, updatedMed];
                    }
                     return [...prevMeds, updatedMed];
                });
                showNotification(`Cambios en "${updatedMed.name.split('(')[0]}" guardados en tu vademécum.`, 'success');
            };

            const handleAddNewMedication = (newMed) => {
                setUserAddedMeds(prev => [...prev, newMed]);
                showNotification(`${newMed.name} ha sido añadido a tu vademécum personal.`, 'success');
                setActiveView('calculator');
            };
          
          const [favorites, setFavorites] = React.useState(() => {
                try {
                    const saved = localStorage.getItem('dosisPerronasFavorites');
                    return saved ? JSON.parse(saved) : [];
                } catch (e) {
                    return [];
                }
            });

            React.useEffect(() => {
                localStorage.setItem('dosisPerronasFavorites', JSON.stringify(favorites));
            }, [favorites]);

            const toggleFavorite = (medName) => {
                let newFavorites;
                if (favorites.includes(medName)) {
                    newFavorites = favorites.filter(name => name !== medName);
                } else {
                    newFavorites = [...favorites, medName];
                }
                setFavorites(newFavorites);
                showNotification(favorites.includes(medName) ? `${medName.split('(')[0].trim()} eliminado de favoritos.` : `${medName.split('(')[0].trim()} añadido a favoritos.`, 'info');
            };

            const addMedication = React.useCallback(() => {
             setMedications(prevMeds => [...prevMeds, { id: Date.now(), selectedMed: null, selectedPresentation: '', concentration: '', selectedPurposeIndex: 0, customRecDose: '', selectedDoseType: null }]);
            }, []);

          React.useEffect(() => {
              addMedication();
              try {
                  const savedHistory = localStorage.getItem('dosisPerronasHistory');
                  if (savedHistory) { setDosisHistory(JSON.parse(savedHistory)); }
              } catch (error) { console.error("Error loading history:", error); }
          }, []);

          React.useEffect(() => {
              try {
                  localStorage.setItem('dosisPerronasHistory', JSON.stringify(dosisHistory));
              } catch (error) { console.error("Error saving history:", error); }
          }, [dosisHistory]);
          
          const speciesEmojis = { 'Perros': '🐶', 'Gatos': '🐱', 'Bovinos': '🐮', 'Equinos': '🐴', 'Ovinos': '🐑', 'Caprinos': '🐐', 'Porcinos': '🐷', 'Aves': '🐔', 'Conejos': '🐰', 'Reptiles': '🐍', 'Anfibios': '🐸', 'Exóticos': '🐾', 'Pequeños Mamíferos': '🐹', 'Hurones': '🐾'};
          
          React.useEffect(() => {
            const rawSpecies = allMedications.flatMap(m => m.doses ? Object.keys(m.doses) : []);
            const unifiedSpecies = new Set(rawSpecies);
            
            const speciesOrder = ['Perros', 'Gatos', 'Equinos', 'Bovinos', 'Porcinos', 'Ovinos', 'Caprinos', 'Conejos', 'Aves', 'Reptiles', 'Anfibios'];
            const sortedSpecies = speciesOrder.filter(s => unifiedSpecies.has(s));
            setSpeciesList(sortedSpecies);
          }, [allMedications]);

          const exoticSpeciesMap = React.useMemo(() => {
               const map = {};
               allMedications.forEach(med => {
                   if (med.doses) {
                       Object.keys(med.doses).forEach(speciesKey => {
                           const categoryMatch = speciesKey.match(/Aves|Reptiles|Conejos|Anfibios|Pequeños Mamíferos/);
                           if (categoryMatch) {
                               const category = categoryMatch[0];
                               if (!map[category]) map[category] = new Set();
                               if (Array.isArray(med.doses[speciesKey])) {
                                   med.doses[speciesKey].forEach(speciesDose => {
                                       if (speciesDose.species) {
                                         map[category].add(speciesDose.species);
                                       } else {
                                         if(!map[category].has(speciesKey)) map[category].add(speciesKey);
                                       }
                                   });
                               }
                           }
                       });
                   }
               });
              Object.keys(map).forEach(category => {
                   map[category] = Array.from(map[category]).sort();
               });
             return map;
           }, [allMedications]);

        React.useEffect(() => {
            setInteractionWarning(null);
        }, [medications]);

            const showNotification = (message, type = 'info') => {
                setNotification({ message, type, id: Date.now() });
                setTimeout(() => setNotification(null), 3000);
            };
            
             const getDoseOptions = (med, species, subSpecies) => {
                 if (!med || !med.doses) return [];
                 if (med.doses[species] && !subSpecies) {
                     return med.doses[species];
                 }
                 if (subSpecies && med.doses[species]) {
                      return med.doses[species].filter(d => d.species === subSpecies);
                 } else if (subSpecies && med.doses[subSpecies]){
                      return med.doses[subSpecies];
                 }
                 return [];
             };

            const handlePatientChange = (e) => {
                const { name, value } = e.target;
                 if (name === 'species' && value !== patient.species) {
                      setMedications([{ id: Date.now(), selectedMed: null, selectedPresentation: '', concentration: '', selectedPurposeIndex: 0, customRecDose: '', selectedDoseType: null }]); 
                      setPatient(prev => ({ ...prev, species: value, subSpecies: '' }));
                 } else {
                     setPatient(prev => ({ ...prev, [name]: value }));
                 }
            };

            const handleMedicationUpdate = (index, field, value) => {
                   const updatedMedications = [...medications];
                   let currentMed = { ...updatedMedications[index] };

                   if (field === 'select') {
                       currentMed.selectedMed = value;
                       currentMed.selectedPurposeIndex = 0;
                       currentMed.selectedDoseType = null; 

                       if(value && value.concentration){
                           const firstPresentation = Object.keys(value.concentration)[0];
                           currentMed.selectedPresentation = firstPresentation;
                           currentMed.concentration = value.concentration[firstPresentation].match(/(\d+\.?\d*)/)?.[0] || '';
                       } else {
                           currentMed.selectedPresentation = '';
                           currentMed.concentration = '';
                       }

                       const doseOptions = getDoseOptions(value, patient.species, patient.subSpecies);
                       const firstDose = doseOptions && doseOptions.length > 0 ? doseOptions[0] : null;
                       currentMed.customRecDose = (firstDose && firstDose.dose_range_rec !== undefined) ? firstDose.dose_range_rec : '';
                   
                   } else if (field === 'selectedPresentation') {
                       currentMed.selectedPresentation = value;
                       currentMed.concentration = currentMed.selectedMed.concentration[value].match(/(\d+\.?\d*)/)?.[0] || '';

                   } else if (field === 'concentration') {
                       currentMed.concentration = value;
                   } else if (field === 'selectedPurposeIndex') {
                       currentMed.selectedPurposeIndex = value;
                       const doseOptions = getDoseOptions(currentMed.selectedMed, patient.species, patient.subSpecies);
                       const newDose = doseOptions && doseOptions[value];
                       currentMed.customRecDose = (newDose && newDose.dose_range_rec !== undefined) ? newDose.dose_range_rec : '';
                       currentMed.selectedDoseType = null;
                   } else if (field === 'customRecDose') {
                       currentMed.customRecDose = value;
                   } else if (field === 'selectedDoseType') {
                       currentMed.selectedDoseType = value;
                   }
                   
                   updatedMedications[index] = currentMed;
                   setMedications(updatedMedications);
               };

            const handleReset = React.useCallback(() => {
                setPatient({ name: '', species: '', subSpecies: '', weight: '' });
                setMedications([]);
                addMedication();
                showNotification('Formulario reiniciado.', 'info');
            }, [addMedication]);
            
            const handleSaveDosis = () => {
                if (!patient.name || !patient.species || !patient.weight || medications.every(m => !m.selectedMed)) {
                    showNotification("Complete la información del paciente y seleccione al menos un medicamento.", "error");
                    return;
                }
                const newEntry = {
                    id: Date.now(),
                    patient: {...patient},
                    medications: medications.filter(m => m.selectedMed).map(m => {
                        const doseOptions = getDoseOptions(m.selectedMed, patient.species, patient.subSpecies);
                        const selectedPurpose = doseOptions[m.selectedPurposeIndex];
                        return {
                            name: m.selectedMed.name,
                            concentration: m.concentration,
                            purpose: selectedPurpose ? selectedPurpose.purpose : 'N/A',
                            customRecDose: m.customRecDose,
                            selectedDoseType: m.selectedDoseType
                        }
                    }),
                    timestamp: new Date().toLocaleString()
                };
                setDosisHistory(prev => [newEntry, ...prev.slice(0, 9)]);
                showNotification(`Dosis para ${patient.name} guardada en el historial.`, 'success');
            };
            
            const handleRestoreDosis = (entry) => {
                setPatient(entry.patient);
                setMedications(entry.medications.map(m_hist => {
                    const fullMedData = allMedications.find(m => m.name === m_hist.name);
                    const doseOptions = getDoseOptions(fullMedData, entry.patient.species, entry.patient.subSpecies);
                    const purposeIndex = doseOptions.findIndex(d => d.purpose === m_hist.purpose);

                    return {
                        id: Date.now() + Math.random(),
                        selectedMed: fullMedData,
                        concentration: m_hist.concentration,
                        selectedPurposeIndex: purposeIndex !== -1 ? purposeIndex : 0,
                        customRecDose: m_hist.customRecDose,
                        selectedDoseType: m_hist.selectedDoseType || null
                    }
                }));
                setShowHistory(false);
                showNotification(`Datos de ${entry.patient.name} restaurados.`, 'info');
            };

             const handleGeneratePdf = () => {
                if (!patient.name || !patient.species || !patient.weight || medications.every(m => !m.selectedMed)) {
                    showNotification("Complete todos los campos para generar el PDF.", "error");
                    return;
                }
                 if (medications.some(m => m.selectedMed && m.selectedDoseType === null)) {
                     showNotification("Por favor, seleccione una dosis (Mín, Rec, o Máx) para cada medicamento antes de generar el PDF.", "error");
                     return;
                 }

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                const pageMargin = 15;
                const sidebarWidth = 60;
                const mainContentX = sidebarWidth + 5;
                const pageWidth = doc.internal.pageSize.getWidth();
                const pageHeight = doc.internal.pageSize.getHeight();
                const usableWidth = pageWidth - mainContentX - pageMargin;
                let cursorY = 20;

                // --- Sidebar (Left Column) ---
                doc.setFillColor(241, 245, 249); // slate-100
                doc.rect(0, 0, sidebarWidth, pageHeight, 'F');

                // Clinic Info (Placeholder)
                doc.setFontSize(14);
                doc.setFont("helvetica", "bold");
                doc.setTextColor(23, 37, 84); // slate-900
                doc.text("Tu Clínica Veterinaria", pageMargin, cursorY);
                cursorY += 8;
                doc.setFontSize(9);
                doc.setFont("helvetica", "normal");
                doc.setTextColor(71, 85, 105); // slate-600
                doc.text("Calle Falsa 123, Colonia Centro", pageMargin, cursorY);
                cursorY += 5;
                doc.text("Ciudad, Estado, CP 12345", pageMargin, cursorY);
                cursorY += 5;
                doc.text("Tel: (55) 1234-5678", pageMargin, cursorY);
                cursorY += 15;

                // Patient Info
                doc.setFontSize(12);
                doc.setFont("helvetica", "bold");
                doc.setTextColor(23, 37, 84);
                doc.text("Paciente", pageMargin, cursorY);
                cursorY += 8;
                doc.setLineWidth(0.2);
                doc.setDrawColor(203, 213, 225); // slate-300
                doc.line(pageMargin, cursorY - 3, sidebarWidth - pageMargin, cursorY - 3);

                doc.setFontSize(10);
                doc.setFont("helvetica", "normal");
                doc.setTextColor(71, 85, 105);
                doc.text(`Nombre: ${patient.name || 'N/A'}`, pageMargin, cursorY);
                cursorY += 7;
                doc.text(`Especie: ${patient.species || 'N/A'}${patient.subSpecies ? ` (${patient.subSpecies})` : ''}`, pageMargin, cursorY);
                cursorY += 7;
                doc.text(`Peso: ${patient.weight || 'N/A'} kg`, pageMargin, cursorY);
                cursorY += 15;

                // --- Main Content (Right Column) ---
                cursorY = 20; // Reset Y for the main column
                doc.setFontSize(22);
                doc.setFont("helvetica", "bold");
                doc.setTextColor(23, 37, 84);
                doc.text("Receta Médica", mainContentX, cursorY);
                cursorY += 8;
                doc.setFontSize(10);
                doc.setFont("helvetica", "normal");
                doc.setTextColor(100, 116, 139);
                doc.text(`Fecha: ${new Date().toLocaleDateString()}`, mainContentX, cursorY);
                cursorY += 15;
                
                  medications.filter(m => m.selectedMed && m.selectedDoseType).forEach((med, index) => {
                      const medData = med.selectedMed;
                      
                      const doseOptions = getDoseOptions(medData, patient.species, patient.subSpecies);
                      const currentPurposeData = doseOptions[med.selectedPurposeIndex] || {};
                       
                      const calculateDose = (purpose, weight, med) => {
                          if (!purpose || !weight || !med.concentration || !purpose.unit) return null;
                          const concentrationValStr = med.selectedMed.concentration[med.selectedPresentation];
                          const concentration = parseFloat(concentrationValStr.match(/(\d+\.?\d*)/)?.[0]);

                          const weightNum = parseFloat(weight);
                          if (isNaN(concentration) || concentration <= 0 || isNaN(weightNum) || weightNum <= 0) return null;
                          const calc = (doseVal) => {
                              if (doseVal === null || typeof doseVal === 'undefined' || isNaN(doseVal)) return { value: 'N/A', unit: '', formula: '' };
                              let totalDose, finalUnit = "mL", formula = '';
                              if (purpose.unit.includes('/kg')) {
                                  totalDose = doseVal * weightNum;
                                  formula = `(${doseVal}${purpose.unit.split(" ")[0]} * ${weightNum}kg)`;
                              } else if (purpose.unit.includes('/perro') || purpose.unit.includes('/gato')) {
                                  totalDose = doseVal;
                                  formula = `${doseVal} ${purpose.unit}`;
                              } else {
                                  return { value: doseVal, unit: purpose.unit.split(" ")[0], formula: 'Dosis directa' };
                              }
                              if(concentrationValStr.includes("tableta")){ finalUnit = "tabletas"; } 
                              else if (concentrationValStr.includes("cápsula")){ finalUnit = "cápsulas"; }
                               else if (concentrationValStr.includes("parche")){ finalUnit = "parche(s)"; }

                              const finalValue = (totalDose / concentration);
                              return { value: finalValue % 1 === 0 ? finalValue : finalValue.toFixed(3), unit: finalUnit, formula: `${formula} / ${concentrationValStr}` };
                          };
                          return { min: calc(purpose.dose_range_min), rec: calc(purpose.dose_range_rec), max: calc(purpose.dose_range_max) };
                      };

                      const calculatedDoses = calculateDose({ ...currentPurposeData, dose_range_rec: parseFloat(med.customRecDose) }, patient.weight, med);
                      const selectedDoseData = calculatedDoses[med.selectedDoseType];
                      
                      if (cursorY > pageHeight - 60) { // Check for page break
                          doc.addPage();
                          // Redraw sidebar on new page
                          doc.setFillColor(241, 245, 249); // slate-100
                          doc.rect(0, 0, sidebarWidth, pageHeight, 'F');
                          cursorY = 20; // Reset cursor
                      }

                      doc.setFontSize(14);
                      doc.setFont("helvetica", "bold");
                      doc.setTextColor(23, 37, 84);
                      doc.text(`${index + 1}. ${medData.name}`, mainContentX, cursorY);
                      cursorY += 8;

                      doc.setFontSize(11);
                      doc.setFont("helvetica", "bold");
                      doc.setTextColor(59, 130, 246);
                      doc.text("Dosis:", mainContentX, cursorY);
                      doc.setFont("helvetica", "normal");
                      doc.setTextColor(45, 55, 72);
                      doc.text(`${selectedDoseData.value} ${selectedDoseData.unit}`, mainContentX + 15, cursorY);
                      cursorY += 7;

                      doc.setFont("helvetica", "bold");
                      doc.setTextColor(59, 130, 246);
                      doc.text("Vía:", mainContentX, cursorY);
                      doc.setFont("helvetica", "normal");
                      doc.setTextColor(45, 55, 72);
                      doc.text(`${currentPurposeData.route || 'N/A'}`, mainContentX + 10, cursorY);
                      cursorY += 7;

                      doc.setFont("helvetica", "bold");
                      doc.setTextColor(59, 130, 246);
                      doc.text("Frecuencia:", mainContentX, cursorY);
                      doc.setFont("helvetica", "normal");
                      doc.setTextColor(45, 55, 72);
                      doc.text(`${currentPurposeData.frequency || 'N/A'}`, mainContentX + 25, cursorY);
                      cursorY += 7;

                      doc.setFontSize(8);
                      doc.setTextColor(100, 116, 139); // slate-500
                      doc.text(`Cálculo: ${selectedDoseData.formula}`, mainContentX, cursorY);
                      cursorY += 10;
                      
                      if (medData.recommendations) {
                          doc.setFont("helvetica", "bold");
                          doc.setTextColor(59, 130, 246);
                          doc.text("Indicaciones:", mainContentX, cursorY);
                          cursorY += 6;
                          doc.setFontSize(10);
                          doc.setFont("helvetica", "normal");
                          doc.setTextColor(71, 85, 105);
                          const recommendations = doc.splitTextToSize(medData.recommendations, usableWidth);
                          doc.text(recommendations, mainContentX, cursorY);
                          cursorY += recommendations.length * 4 + 5;
                      }
                      
                      doc.setLineWidth(0.1);
                      doc.setDrawColor(203, 213, 225);
                      doc.line(mainContentX, cursorY, pageWidth - pageMargin, cursorY);
                      cursorY += 8;
                  });

                // --- Footer / Signature ---
                  const signatureY = pageHeight - 30;
                  doc.setDrawColor(23, 37, 84);
                  doc.setLineWidth(0.3);
                  doc.line(mainContentX, signatureY, pageWidth - pageMargin, signatureY);
                  doc.setFontSize(10);
                  doc.setFont("helvetica", "normal");
                  doc.setTextColor(45, 55, 72);
                  doc.text("Firma del M.V.Z.", mainContentX, signatureY + 5);


                doc.save(`Receta-${patient.name.replace(/\s/g, '_')}.pdf`);
                showNotification("PDF generado exitosamente.", "success");
            };
            
              // --- UI SUB-COMPONENTS ---
            const MedicationSearch = ({ selectedMed, onSelect, species, subSpecies, favorites, toggleFavorite }) => {
                const [searchTerm, setSearchTerm] = React.useState(selectedMed ? selectedMed.name : '');
                const [isFocused, setIsFocused] = React.useState(false);
                const searchRef = React.useRef(null);

                React.useEffect(() => {
                    setSearchTerm(selectedMed ? selectedMed.name : '');
                }, [selectedMed]);
                
                  const filteredMeds = React.useMemo(() => {
                    const allFiltered = allMedications.filter(m => {
                        const hasDoseForSpecies = getDoseOptions(m, species, subSpecies).length > 0;
                        const matchesSearch = searchTerm === '' || m.name.toLowerCase().includes(searchTerm.toLowerCase()) || (m.commercial_names && m.commercial_names.join(' ').toLowerCase().includes(searchTerm.toLowerCase()));
                        return hasDoseForSpecies && matchesSearch;
                    });

                    return allFiltered.sort((a, b) => {
                        const aIsFav = favorites.includes(a.name);
                        const bIsFav = favorites.includes(b.name);
                        if (aIsFav && !bIsFav) return -1;
                        if (!aIsFav && bIsFav) return 1;
                        return a.name.localeCompare(b.name);
                    });
                }, [searchTerm, species, subSpecies, favorites, allMedications]);


                const handleSelectMed = (medData) => {
                    setSearchTerm(medData ? medData.name : '');
                    onSelect(medData);
                    setIsFocused(false);
                };
                
                React.useEffect(() => {
                    const handleClickOutside = (event) => {
                        if (searchRef.current && !searchRef.current.contains(event.target)) setIsFocused(false);
                    };
                    document.addEventListener("mousedown", handleClickOutside);
                    return () => document.removeEventListener("mousedown", handleClickOutside);
                }, []);

                return (
                    <div className="relative w-full" ref={searchRef}>
                        <input type="text" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} onFocus={() => setIsFocused(true)} placeholder="Buscar medicamento..." className="w-full px-3 py-2 text-gray-200 bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-normal"/>
                        {searchTerm && (
                            <button onClick={() => handleSelectMed(null)} className="absolute right-10 top-0 h-full px-2 text-gray-500 hover:text-white">
                                <X className="w-4 h-4"/>
                            </button>
                        )}
                        {isFocused && (
                            <ul className="absolute z-20 w-full mt-1 bg-slate-700 border border-slate-600 rounded-lg max-h-60 overflow-y-auto" style={{ WebkitOverflowScrolling: 'touch' }}>
                                {filteredMeds.length > 0 ? filteredMeds.map(medData => {
                                    const isFav = favorites.includes(medData.name);
                                    return (
                                    <li key={medData.name} onClick={() => handleSelectMed(medData)} className={`flex justify-between items-center px-4 py-2 cursor-pointer hover:bg-slate-600 text-gray-200 ${isFav ? 'bg-slate-800' : ''}`}>
                                        <div>
                                            {medData.name} <span className="text-xs text-gray-400">({(medData.commercial_names || []).join(', ')})</span>
                                        </div>
                                        <button onClick={(e) => { e.stopPropagation(); toggleFavorite(medData.name); }} className={`p-1 rounded-full hover:bg-slate-500 ${isFav ? 'text-yellow-400' : 'text-gray-500'}`}>
                                            <Star size={16} fill={isFav ? 'currentColor' : 'none'} />
                                        </button>
                                    </li>
                                    );
                                }) : <li className="px-4 py-2 text-gray-400">No hay coincidencias.</li>}
                            </ul>
                        )}
                        <button onClick={() => setIsFocused(!isFocused)} className="absolute right-0 top-0 h-full px-3 text-gray-400 hover:text-white">
                            <ChevronDown className="w-5 h-5"/>
                        </button>
                    </div>
                );
            };

            const DosageBlock = ({ med, index, handleUpdateUserMed, patient }) => {
                const [localConcentration, setLocalConcentration] = React.useState('');
                const [localCustomRecDose, setLocalCustomRecDose] = React.useState('');
                const [isDirty, setIsDirty] = React.useState(false);
                
                React.useEffect(() => {
                    setLocalConcentration(med.concentration);
                    setLocalCustomRecDose(med.customRecDose);
                }, [med.concentration, med.customRecDose]);

                const removeMedication = (index) => {
                    setMedications(medications.filter((_, i) => i !== index));
                };

                const medData = med.selectedMed;
                const doseOptions = React.useMemo(() => getDoseOptions(medData, patient.species, patient.subSpecies), [medData, patient.species, patient.subSpecies]);
                const currentPurposeData = doseOptions[med.selectedPurposeIndex] || {};
                
                const purposeDataForCalc = { 
                    ...currentPurposeData, 
                    dose_range_rec: parseFloat(localCustomRecDose) 
                };

                React.useEffect(() => {
                    if (!medData) {
                        setIsDirty(false);
                        return;
                    }
                    const originalMed = allMedications.find(m => m.name === medData.name);
                    if (!originalMed || !med.selectedPresentation) {
                         setIsDirty(false);
                         return;
                    }
                    
                    const originalConcentrationStr = originalMed.concentration[med.selectedPresentation] || '';
                    const originalConcentrationNum = originalConcentrationStr.match(/(\d+\.?\d*)/)?.[0] || '';

                    const originalDoseOptions = getDoseOptions(originalMed, patient.species, patient.subSpecies);
                    const originalPurposeData = originalDoseOptions[med.selectedPurposeIndex] || {};
                    
                    const concChanged = originalConcentrationNum !== localConcentration;
                    const doseChanged = (originalPurposeData.dose_range_rec !== undefined && parseFloat(originalPurposeData.dose_range_rec) !== parseFloat(localCustomRecDose));

                    setIsDirty(concChanged || doseChanged);

                }, [medData, localConcentration, localCustomRecDose, med.selectedPurposeIndex, med.selectedPresentation, patient.species, patient.subSpecies]);

                const handleSaveChanges = () => {
                     const originalMed = allMedications.find(m => m.name === medData.name);
                     if (!originalMed || !med.selectedPresentation) return;

                     // Create a deep copy to avoid direct mutation
                     const medToSave = JSON.parse(JSON.stringify(originalMed));

                     // Update concentration
                     const oldConcStr = medToSave.concentration[med.selectedPresentation];
                     const newConcStr = oldConcStr.replace(/(\d+\.?\d*)/, localConcentration);
                     medToSave.concentration[med.selectedPresentation] = newConcStr;

                     // Update dose
                     const speciesKey = patient.subSpecies || patient.species;
                     if(medToSave.doses[speciesKey] && medToSave.doses[speciesKey][med.selectedPurposeIndex]){
                         medToSave.doses[speciesKey][med.selectedPurposeIndex].dose_range_rec = parseFloat(localCustomRecDose);
                     }

                     handleUpdateUserMed(medToSave);
                     setIsDirty(false);
                };
                
                const parseUnitString = (unitStr) => {
                    if (!unitStr) return { multiplier: 1, unit: 'mg' };
                    const lowerStr = unitStr.toLowerCase();
                    if (lowerStr.includes('mcg')) return { multiplier: 0.001, unit: 'mcg' };
                    if (lowerStr.includes('ui')) return { multiplier: 1, unit: 'UI' };
                    if (lowerStr.includes('g')) return { multiplier: 1000, unit: 'g' };
                    return { multiplier: 1, unit: 'mg' };
                }

                const calculateDose = (purpose, weight, med) => {
                    if (!purpose || !weight || !med.selectedMed || !med.selectedPresentation || !purpose.unit) return null;

                    const concentrationValStr = med.selectedMed.concentration[med.selectedPresentation];
                    if (!concentrationValStr) return null;
                    
                    const concentrationNum = parseFloat(concentrationValStr.match(/(\d+\.?\d*)/)?.[0]);
                    const weightNum = parseFloat(weight);

                    if (isNaN(concentrationNum) || concentrationNum <= 0 || isNaN(weightNum) || weightNum <= 0) return null;

                    const doseUnitInfo = parseUnitString(purpose.unit);
                    const concUnitInfo = parseUnitString(concentrationValStr);
                    
                    const calc = (doseVal) => {
                        if (doseVal === null || typeof doseVal === 'undefined' || isNaN(doseVal)) return { value: 'N/A', unit: '', formula: '' };
                        
                        let totalDoseAmount;
                        let formula = '';
                        
                        if (purpose.unit.includes('/kg')) {
                            totalDoseAmount = doseVal * weightNum;
                            formula = `(${doseVal} ${purpose.unit.split('/')[0]} * ${weightNum}kg)`;
                        } else if (purpose.unit.includes('/perro') || purpose.unit.includes('/gato') || purpose.unit.includes('por gato') || purpose.unit.includes('/hurón')) {
                            totalDoseAmount = doseVal;
                            formula = `${doseVal} ${purpose.unit}`;
                        } else {
                            return { value: doseVal, unit: purpose.unit.split(' ')[0], formula: 'Dosis directa' };
                        }

                        let finalUnit = "mL";
                        if(concentrationValStr.toLowerCase().includes("tableta")){ finalUnit = "tabletas"; } 
                        else if (concentrationValStr.toLowerCase().includes("cápsula")){ finalUnit = "cápsulas"; }
                        else if (concentrationValStr.toLowerCase().includes("parche")){ finalUnit = "parche(s)"; }
                        
                        const doseInBaseUnits = totalDoseAmount * doseUnitInfo.multiplier;
                        const concInBaseUnits = concentrationNum * concUnitInfo.multiplier;

                        const finalValue = doseInBaseUnits / concInBaseUnits;
                        
                        return {
                            value: finalValue % 1 === 0 ? finalValue : finalValue.toFixed(3),
                            unit: finalUnit,
                            formula: `${formula} / ${concentrationValStr}`
                        };
                    };
                    return { min: calc(purpose.dose_range_min), rec: calc(purpose.dose_range_rec), max: calc(purpose.dose_range_max) };
                };
                
                const calculatedDoses = calculateDose(purposeDataForCalc, patient.weight, med);

                const DoseDisplay = ({ dose, label, color, type, isSelected, onSelect }) => {
                    const selectedClasses = "ring-2 ring-offset-2 ring-offset-slate-800";
                    const colorClasses = {
                        yellow: `border-yellow-500/50 ${isSelected ? "ring-yellow-500" : ""}`,
                        green: `border-green-500/50 ${isSelected ? "ring-green-500" : ""}`,
                        red: `border-red-500/50 ${isSelected ? "ring-red-500" : ""}`,
                    };

                    if (!dose || dose.value === 'N/A') return <div className="p-2 border border-gray-600 rounded-lg flex items-center justify-center cursor-not-allowed"><p className="text-gray-500">N/A</p></div>;
                    
                    return (
                        <div onClick={onSelect} className={`p-2 border rounded-lg overflow-hidden cursor-pointer relative transition-all ${colorClasses[color]} ${isSelected ? selectedClasses : "hover:scale-105"}`}>
                           {isSelected && (
                                <button onClick={(e) => { e.stopPropagation(); onSelect(null); }} className="absolute top-1 right-1 bg-slate-700 rounded-full p-0.5 text-white hover:bg-slate-600 z-10">
                                    <X size={12} />
                                </button>
                            )}
                            <p className={`text-xs text-${color}-400 font-bold`}>{label}</p>
                            <p className={`text-xl text-${color}-400 font-mono font-bold`}>
                                {dose.value} <span className="text-sm">{dose.unit}</span>
                            </p>
                            <p className="text-[10px] text-gray-500 font-mono break-all">{dose.formula}</p>
                        </div>
                    );
                };

                const doseDisplaySection = () => {
                    if (!calculatedDoses) return <div className="p-3 bg-gray-700/50 rounded-lg text-center text-gray-400"><p>Complete los datos para calcular la dosis.</p></div>;

                    if (med.selectedDoseType) {
                        const type = med.selectedDoseType;
                        const label = { min: "MÍNIMA", rec: "RECOMENDADA", max: "MÁXIMA" }[type];
                        const color = { min: "yellow", rec: "green", max: "red" }[type];
                        return (
                             <DoseDisplay dose={calculatedDoses[type]} label={label} color={color} type={type} isSelected={true} onSelect={() => handleMedicationUpdate(index, 'selectedDoseType', null)} />
                        );
                    }

                    return (
                        <div className="grid grid-cols-1 sm:grid-cols-3 gap-2 text-center">
                            <DoseDisplay dose={calculatedDoses.min} label="MÍNIMA" color="yellow" type="min" isSelected={false} onSelect={() => handleMedicationUpdate(index, 'selectedDoseType', 'min')} />
                            <DoseDisplay dose={calculatedDoses.rec} label="RECOMENDADA" color="green" type="rec" isSelected={false} onSelect={() => handleMedicationUpdate(index, 'selectedDoseType', 'rec')} />
                            <DoseDisplay dose={calculatedDoses.max} label="MÁXIMA" color="red" type="max" isSelected={false} onSelect={() => handleMedicationUpdate(index, 'selectedDoseType', 'max')} />
                        </div>
                    );
                };

                return (
                      <div className="bg-slate-800 p-4 rounded-xl shadow-lg mt-4 border border-slate-700">
                           <div className="flex justify-between items-center mb-4 gap-2">
                               <label className="block text-gray-300 text-sm font-bold whitespace-nowrap">Medicamento</label>
                               <div className="flex items-center w-full">
                                   <MedicationSearch selectedMed={medData} onSelect={(data) => handleMedicationUpdate(index, 'select', data)} species={patient.species} subSpecies={patient.subSpecies} favorites={favorites} toggleFavorite={toggleFavorite} />
                                   {medications.length > 1 && (<button onClick={() => removeMedication(index)} className="ml-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors" title="Eliminar medicamento"><X size={16} /></button>)}
                               </div>
                           </div>
                           
                           {medData && (
                           <div className="space-y-4">
                               <div className="grid grid-cols-1 md:grid-cols-2 gap-4 items-end">
                                   {medData.concentration && Object.keys(medData.concentration).length > 0 && (
                                        <div>
                                           <label className="text-gray-300 text-sm font-bold mr-2 mb-1 block whitespace-nowrap">Presentación:</label>
                                           <select value={med.selectedPresentation} onChange={e => handleMedicationUpdate(index, 'selectedPresentation', e.target.value)} className="w-full px-4 py-2 bg-slate-700 text-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-normal">
                                               {Object.keys(medData.concentration).map((pres) => (
                                                   <option key={pres} value={pres}>{pres} ({medData.concentration[pres]})</option>
                                               ))}
                                           </select>
                                       </div>
                                   )}
                                   {doseOptions && doseOptions.length > 0 && (
                                        <div className="w-full">
                                           <label className="text-gray-300 text-sm font-bold mr-2 mb-1 block whitespace-nowrap">Uso del Medicamento:</label>
                                           <select value={med.selectedPurposeIndex} onChange={e => handleMedicationUpdate(index, 'selectedPurposeIndex', parseInt(e.target.value))} className="w-full px-4 py-2 bg-slate-700 text-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-normal">
                                               {doseOptions.map((dose, idx) => (
                                                   <option key={`${dose.purpose}-${idx}`} value={idx}>{dose.purpose}</option>
                                               ))}
                                           </select>
                                       </div>
                                   )}
                               </div>
                               <div className="grid grid-cols-1 md:grid-cols-2 gap-4 items-end">
                                   <div>
                                       <label className="text-gray-300 text-sm font-bold mr-2 whitespace-nowrap">Concentración Numérica:</label>
                                       <input type="text" inputMode="decimal" value={localConcentration} onChange={(e) => setLocalConcentration(e.target.value)} onBlur={() => handleMedicationUpdate(index, 'concentration', localConcentration)} className="w-full mt-1 px-4 py-2 bg-slate-700 text-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-normal" placeholder="Ej: 50" />
                                   </div>
                                   <div>
                                       <label className="text-gray-300 text-sm font-bold mr-2 whitespace-nowrap">Dosis Manual:</label>
                                        <input type="text" inputMode="decimal" value={localCustomRecDose} onChange={(e) => setLocalCustomRecDose(e.target.value)} onBlur={() => handleMedicationUpdate(index, 'customRecDose', localCustomRecDose)} className="w-full mt-1 px-4 py-2 bg-slate-700 text-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-normal" />
                                        {currentPurposeData.dose_range_min !== undefined && (
                                           <p className="text-xs text-gray-400 mt-1">
                                                Rango Sugerido: {currentPurposeData.dose_range_min} - {currentPurposeData.dose_range_max} {currentPurposeData.unit}
                                           </p>
                                       )}
                                   </div>
                               </div>
                               
                               {isDirty && (
                                   <button onClick={handleSaveChanges} className="w-full flex items-center justify-center gap-2 py-2 px-4 bg-green-600 hover:bg-green-700 rounded-lg text-white font-bold text-sm">
                                       <Save size={16} /> Guardar Cambios en Vademécum
                                   </button>
                               )}

                               <div className="my-4">
                                   <h3 className="text-md font-bold text-gray-300 mb-2">Dosis Calculada (Selecciona una)</h3>
                                   {doseDisplaySection()}
                                   {calculatedDoses && (
                                       <div className="text-center mt-2 text-sm text-gray-400">
                                           <p>Vía: <span className="font-bold text-gray-200">{currentPurposeData.route || 'N/A'}</span></p>
                                           <p>Frecuencia: <span className="font-bold text-gray-200">{currentPurposeData.frequency || 'N/A'}</span></p>
                                       </div>
                                   )}
                               </div>
                               
                               <MedicationInfo medData={medData} />
                           </div>
                           )}
                      </div>
                );
            };
            
            // --- RENDER LOGIC ---
            const renderContent = () => {
                const isExoticCategory = ['Aves', 'Reptiles', 'Conejos', 'Anfibios', 'Pequeños Mamíferos'].includes(patient.species);
                
                switch (activeView) {
                    case 'emergency': return <EmergencyMode onExit={() => setActiveView('calculator')} />;
                    case 'tools': return <ToolsMenu onSelect={(tool) => setActiveView(tool)} />;
                    case 'fluid': return <FluidTherapyCalculator onClose={() => setActiveView('calculator')} />;
                    case 'bsa': return <BSACalculator onClose={() => setActiveView('calculator')} />;
                    case 'cri': return <CRICalculator onClose={() => setActiveView('calculator')} />;
                    case 'dilution': return <DilutionCalculator onClose={() => setActiveView('calculator')} />;
                    case 'vademecum': return <VademecumView allMedications={allMedications} favorites={favorites} toggleFavorite={toggleFavorite} onClose={() => setActiveView('calculator')} handleUpdateUserMed={handleUpdateUserMed} />;
                    case 'protocols': return <AnestheticProtocolsView onClose={() => setActiveView('calculator')} />;
                    case 'constants': return <PhysiologicalConstantsView onClose={() => setActiveView('calculator')} />;
                    case 'addMed': return <AddMedicationAI onSave={handleAddNewMedication} onClose={() => setActiveView('calculator')} />;
                    case 'timer': return <TimerTool onClose={() => setActiveView('calculator')} />;
                    case 'calculator':
                    default:
                        return (
                           <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-gray-700">
                              <h2 className="text-xl font-bold mb-4 text-white">Información del Paciente</h2>
                                <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-4">
                                    <div>
                                        <label htmlFor="patientName" className="block text-sm font-bold text-gray-400 mb-1">Nombre</label>
                                        <input id="patientName" type="text" name="name" value={patient.name} onChange={handlePatientChange} className="w-full px-4 py-2 bg-slate-700 text-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-normal" />
                                    </div>
                                    <div>
                                        <label htmlFor="patientSpecies" className="block text-sm font-bold text-gray-400 mb-1">Especie</label>
                                        <select id="patientSpecies" name="species" value={patient.species} onChange={handlePatientChange} className="w-full px-4 py-2 bg-slate-700 text-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-normal">
                                            <option value="">Selecciona</option>
                                            {speciesList.map(species => (<option key={species} value={species}>{speciesEmojis[species] || ''} {species}</option>))}
                                        </select>
                                    </div>
                                    {isExoticCategory && (
                                        <div>
                                            <label htmlFor="patientSubSpecies" className="block text-sm font-bold text-gray-400 mb-1">{patient.species}</label>
                                            <select id="patientSubSpecies" name="subSpecies" value={patient.subSpecies} onChange={handlePatientChange} className="w-full px-4 py-2 bg-slate-700 text-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-normal">
                                                <option value="">Selecciona específico</option>
                                                {exoticSpeciesMap[patient.species] && exoticSpeciesMap[patient.species].map(subSpecies => (
                                                    <option key={subSpecies} value={subSpecies}>{subSpecies}</option>
                                                ))}
                                            </select>
                                        </div>
                                    )}
                                     <div>
                                        <label htmlFor="patientWeight" className="block text-sm font-bold text-gray-400 mb-1">Peso (kg)</label>
                                        <input id="patientWeight" type="number" name="weight" value={patient.weight} onChange={handlePatientChange} min="0" step="0.1" className="w-full px-4 py-2 bg-slate-700 text-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-normal" placeholder="Ej: 10.5"/>
                                    </div>
                                </div>
                                
                                {interactionWarning && (
                                    <div className="flex items-start p-3 my-4 bg-purple-900/50 border-l-4 border-purple-500 rounded-md text-purple-300">
                                        <AlertTriangle className="mr-3 flex-shrink-0 mt-1" />
                                        <div><strong className="font-bold">Posible Interacción:</strong> {interactionWarning}</div>
                                    </div>
                                )}

                                {(patient.species && patient.weight && (!isExoticCategory || patient.subSpecies)) ? medications.map((med, index) => (<DosageBlock key={med.id} med={med} index={index} handleUpdateUserMed={handleUpdateUserMed} patient={patient} />)) : (
                                   <div className="text-center py-8 text-gray-500">
                                     <p>Por favor, completa la información del paciente para empezar.</p>
                                   </div>
                                )}
                                
                                {(patient.species && patient.weight && (!isExoticCategory || patient.subSpecies)) && (
                                   <div className="flex flex-wrap items-center justify-between mt-6 gap-3">
                                     <button onClick={addMedication} className="flex items-center space-x-2 px-4 py-2 text-white bg-blue-600 rounded-full hover:bg-blue-700 transition-colors shadow-lg"><PlusCircle size={20} /><span>Añadir Medicamento</span></button>
                                     <div className="flex items-center gap-3">
                                         <button onClick={handleSaveDosis} className="flex items-center space-x-2 px-4 py-2 text-white bg-green-600 rounded-full hover:bg-green-700 transition-colors shadow-lg"><ClipboardList size={20} /><span>Guardar Dosis</span></button>
                                         <button onClick={handleGeneratePdf} className="flex items-center space-x-2 px-4 py-2 text-white bg-red-600 rounded-full hover:bg-red-700 transition-colors shadow-lg"><FileDown size={20} /><span>Generar PDF</span></button>
                                     </div>
                                   </div>
                                )}
                          </div>
                        );
                }
            }


        return (
          <div className="min-h-screen bg-slate-950 p-4 font-sans text-gray-200">
              <div className="max-w-4xl mx-auto">
                  {notification && (<div className={`fixed top-5 right-5 p-4 rounded-lg shadow-lg text-white z-50 animate-fade-in-out ${notification.type === 'success' ? 'bg-green-600' : notification.type === 'error' ? 'bg-red-600' : 'bg-blue-600'}`}>{notification.message}</div>)}

                  <div className="text-center p-4">
                      <h1 className="text-3xl sm:text-4xl font-extrabold text-white">Dosis Perronas</h1>
                      <p className="text-sm text-gray-400 font-normal">by: Arturo Alvarado</p>
                  </div>
                  
                  <div className="flex justify-center items-center flex-wrap gap-2 p-2 mb-6 bg-slate-900 rounded-xl">
                        <button onClick={() => setActiveView(activeView === 'calculator' ? 'tools' : 'calculator')} className="p-2 text-gray-400 hover:text-white transition-colors" title="Herramientas"><Menu size={24} /></button>
                        <button onClick={() => setActiveView('emergency')} className="p-2 text-red-500 hover:text-red-400 transition-colors" title="Modo Emergencia"><Siren size={24} /></button>
                        <button onClick={handleReset} className="p-2 text-gray-400 hover:text-red-500 transition-colors" title="Reiniciar"><RotateCw size={24} /></button>
                        <button onClick={() => setShowHistory(true)} className="p-2 text-gray-400 hover:text-white transition-colors" title="Historial"><MoreVertical size={24} /></button>
                  </div>
                    
                    {renderContent()}

                    {showHistory && <HistoryModal history={dosisHistory} onClose={() => setShowHistory(false)} onRestore={handleRestoreDosis} />}
              </div>
          </div>
        );
      };
      
        ReactDOM.render(<DosisApp />, document.getElementById('root'));
    </script>
</body>
</html>
